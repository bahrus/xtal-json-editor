(function(e,t){'object'===typeof exports&&'object'===typeof module?module.exports=t():'function'===typeof define&&define.amd?define([],t):'object'===typeof exports?exports.JSONEditor=t():e.JSONEditor=t()})(this,function(){var e=Math.max;return function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=e,t.c=o,t.p='',t(0)}([function(e,t,o){'use strict';function n(e,t,o){if(!(this instanceof n))throw new Error('JSONEditor constructor called without "new".');var r=s.getInternetExplorerVersion();if(-1!=r&&9>r)throw new Error('Unsupported browser, IE9 or newer required. Please install the newest version of your browser.');if(t&&(t.error&&(console.warn('Option "error" has been renamed to "onError"'),t.onError=t.error,delete t.error),t.change&&(console.warn('Option "change" has been renamed to "onChange"'),t.onChange=t.change,delete t.change),t.editable&&(console.warn('Option "editable" has been renamed to "onEditable"'),t.onEditable=t.editable,delete t.editable),t)){var i=['ace','theme','ajv','schema','onChange','onEditable','onError','onModeChange','escapeUnicode','history','search','mode','modes','name','indentation','sortObjectKeys'];Object.keys(t).forEach(function(e){-1===i.indexOf(e)&&console.warn('Unknown option "'+e+'". This option will be ignored')})}arguments.length&&this._create(e,t,o)}var r;try{r=o(!function(){var t=new Error('Cannot find module "ajv"');throw t.code='MODULE_NOT_FOUND',t}())}catch(e){}var i=o(1),a=o(12),s=o(4);n.modes={},n.prototype.DEBOUNCE_INTERVAL=150,n.prototype._create=function(e,t,o){this.container=e,this.options=t||{},this.json=o||{};var n=this.options.mode||'tree';this.setMode(n)},n.prototype.destroy=function(){},n.prototype.set=function(e){this.json=e},n.prototype.get=function(){return this.json},n.prototype.setText=function(e){this.json=s.parse(e)},n.prototype.getText=function(){return JSON.stringify(this.json)},n.prototype.setName=function(e){this.options||(this.options={}),this.options.name=e},n.prototype.getName=function(){return this.options&&this.options.name},n.prototype.setMode=function(e){var t=this.container,o=s.extend({},this.options),r=o.mode,i,a;o.mode=e;var l=n.modes[e];if(l)try{var d='text'==l.data;if(a=this.getName(),i=this[d?'getText':'get'](),this.destroy(),s.clear(this),s.extend(this,l.mixin),this.create(t,o),this.setName(a),this[d?'setText':'set'](i),'function'===typeof l.load)try{l.load.call(this)}catch(e){console.error(e)}if('function'===typeof o.onModeChange&&e!==r)try{o.onModeChange(e,r)}catch(e){console.error(e)}}catch(e){this._onError(e)}else throw new Error('Unknown mode "'+o.mode+'"')},n.prototype.getMode=function(){return this.options.mode},n.prototype._onError=function(e){if(this.options&&'function'===typeof this.options.onError)this.options.onError(e);else throw e},n.prototype.setSchema=function(e){if(e){var t;try{t=this.options.ajv||r({allErrors:!0,verbose:!0})}catch(e){console.warn('Failed to create an instance of Ajv, JSON Schema validation is not available. Please use a JSONEditor bundle including Ajv, or pass an instance of Ajv as via the configuration option `ajv`.')}t&&(this.validateSchema=t.compile(e),this.options.schema=e,this.validate()),this.refresh()}else this.validateSchema=null,this.options.schema=null,this.validate(),this.refresh()},n.prototype.validate=function(){},n.prototype.refresh=function(){},n.registerMode=function(e){var t,o;if(s.isArray(e))for(t=0;t<e.length;t++)n.registerMode(e[t]);else{if(!('mode'in e))throw new Error('Property "mode" missing');if(!('mixin'in e))throw new Error('Property "mixin" missing');if(!('data'in e))throw new Error('Property "data" missing');var r=e.mode;if(r in n.modes)throw new Error('Mode "'+r+'" already registered');if('function'!==typeof e.mixin.create)throw new Error('Required function "create" missing on mixin');var i=['setMode','registerMode','modes'];for(t=0;t<i.length;t++)if(o=i[t],o in e.mixin)throw new Error('Reserved property "'+o+'" not allowed in mixin');n.modes[r]=e}},n.registerMode(i),n.registerMode(a),e.exports=n},function(t,o,n){'use strict';var r=Math.min,i=n(2),a=n(3),s=n(6),l=n(7),d=n(8),c=n(11),p=n(4),u={};u.create=function(e,t){if(!e)throw new Error('No container element provided.');this.container=e,this.dom={},this.highlighter=new i,this.selection=void 0,this.multiselection={nodes:[]},this.validateSchema=null,this.errorNodes=[],this.node=null,this.focusTarget=null,this._setOptions(t),this.options.history&&'view'!==this.options.mode&&(this.history=new a(this)),this._createFrame(),this._createTable()},u.destroy=function(){this.frame&&this.container&&this.frame.parentNode==this.container&&(this.container.removeChild(this.frame),this.frame=null),this.container=null,this.dom=null,this.clear(),this.node=null,this.focusTarget=null,this.selection=null,this.multiselection=null,this.errorNodes=null,this.validateSchema=null,this._debouncedValidate=null,this.history&&(this.history.destroy(),this.history=null),this.searchBox&&(this.searchBox.destroy(),this.searchBox=null),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null)},u._setOptions=function(e){if(this.options={search:!0,history:!0,mode:'tree',name:void 0,schema:null},e)for(var t in e)e.hasOwnProperty(t)&&(this.options[t]=e[t]);this.setSchema(this.options.schema),this._debouncedValidate=p.debounce(this.validate.bind(this),this.DEBOUNCE_INTERVAL)},u.set=function(e,t){if(t&&(console.warn('Second parameter "name" is deprecated. Use setName(name) instead.'),this.options.name=t),e instanceof Function||void 0===e)this.clear();else{this.content.removeChild(this.table);var o={field:this.options.name,value:e},n=new d(this,o);this._setRoot(n),this.validate();this.node.expand(!1),this.content.appendChild(this.table)}this.history&&this.history.clear(),this.searchBox&&this.searchBox.clear()},u.get=function(){if(this.focusTarget){var e=d.getNodeFromTarget(this.focusTarget);e&&e.blur()}return this.node?this.node.getValue():void 0},u.getText=function(){return JSON.stringify(this.get())},u.setText=function(e){this.set(p.parse(e))},u.setName=function(e){this.options.name=e,this.node&&this.node.updateField(this.options.name)},u.getName=function(){return this.options.name},u.focus=function(){var e=this.content.querySelector('[contenteditable=true]');e?e.focus():this.node.dom.expand?this.node.dom.expand.focus():this.node.dom.menu?this.node.dom.menu.focus():(e=this.frame.querySelector('button'),e&&e.focus())},u.clear=function(){this.node&&(this.node.collapse(),this.tbody.removeChild(this.node.getDom()),delete this.node)},u._setRoot=function(e){this.clear(),this.node=e,this.tbody.appendChild(e.getDom())},u.search=function(e){var t;return this.node?(this.content.removeChild(this.table),t=this.node.search(e),this.content.appendChild(this.table)):t=[],t},u.expandAll=function(){this.node&&(this.content.removeChild(this.table),this.node.expand(),this.content.appendChild(this.table))},u.collapseAll=function(){this.node&&(this.content.removeChild(this.table),this.node.collapse(),this.content.appendChild(this.table))},u._onAction=function(e,t){this.history&&this.history.add(e,t),this._onChange()},u._onChange=function(){if(this._debouncedValidate(),this.options.onChange)try{this.options.onChange()}catch(e){console.error('Error in onChange callback: ',e)}},u.validate=function(){this.errorNodes&&this.errorNodes.forEach(function(e){e.setError(null)});var e=this.node;if(e){var t=e.validate(),o=[];if(this.validateSchema){var n=this.validateSchema(e.getValue());n||(o=this.validateSchema.errors.map(function(e){return p.improveSchemaError(e)}).map(function(t){return{node:e.findNode(t.dataPath),error:t}}).filter(function(e){return null!=e.node}))}this.errorNodes=t.concat(o).reduce(function(e,t){return t.node.findParents().map(function(e){return{node:e,child:t.node,error:{message:'object'===e.type?'Contains invalid properties':'Contains invalid items'}}}).concat(e,[t])},[]).map(function(e){return e.node.setError(e.error,e.child),e.node})}},u.refresh=function(){this.node&&this.node.updateDom({recurse:!0})},u.startAutoScroll=function(e){var t=this,o=this.content,n=p.getAbsoluteTop(o),r=o.clientHeight,i=n+r,a=24;this.autoScrollStep=e<n+a&&0<o.scrollTop?(n+a-e)/3:e>i-a&&r+o.scrollTop<o.scrollHeight?(i-a-e)/3:void 0,this.autoScrollStep?!this.autoScrollTimer&&(this.autoScrollTimer=setInterval(function(){t.autoScrollStep?o.scrollTop-=t.autoScrollStep:t.stopAutoScroll()},50)):this.stopAutoScroll()},u.stopAutoScroll=function(){this.autoScrollTimer&&(clearTimeout(this.autoScrollTimer),delete this.autoScrollTimer),this.autoScrollStep&&delete this.autoScrollStep},u.setSelection=function(e){e&&('scrollTop'in e&&this.content&&(this.content.scrollTop=e.scrollTop),e.nodes&&this.select(e.nodes),e.range&&p.setSelectionOffset(e.range),e.dom&&e.dom.focus())},u.getSelection=function(){var e=p.getSelectionOffset();return e&&'DIV'!==e.container.nodeName&&(e=null),{dom:this.focusTarget,range:e,nodes:this.multiselection.nodes.slice(0),scrollTop:this.content?this.content.scrollTop:0}},u.scrollTo=function(t,o){var n=this.content;if(n){var i=this;i.animateTimeout&&(clearTimeout(i.animateTimeout),delete i.animateTimeout),i.animateCallback&&(i.animateCallback(!1),delete i.animateCallback);var a=n.clientHeight,s=n.scrollHeight-a,l=r(e(t-a/4,0),s),d=function(){var e=n.scrollTop,t=l-e;3<Math.abs(t)?(n.scrollTop+=t/3,i.animateCallback=o,i.animateTimeout=setTimeout(d,50)):(o&&o(!0),n.scrollTop=l,delete i.animateTimeout,delete i.animateCallback)};d()}else o&&o(!1)},u._createFrame=function(){function e(e){t._onEvent&&t._onEvent(e)}this.frame=document.createElement('div'),this.frame.className='jsoneditor jsoneditor-mode-'+this.options.mode,this.container.appendChild(this.frame);var t=this;this.frame.onclick=function(t){var o=t.target;e(t),'BUTTON'==o.nodeName&&t.preventDefault()},this.frame.oninput=e,this.frame.onchange=e,this.frame.onkeydown=e,this.frame.onkeyup=e,this.frame.oncut=e,this.frame.onpaste=e,this.frame.onmousedown=e,this.frame.onmouseup=e,this.frame.onmouseover=e,this.frame.onmouseout=e,p.addEventListener(this.frame,'focus',e,!0),p.addEventListener(this.frame,'blur',e,!0),this.frame.onfocusin=e,this.frame.onfocusout=e,this.menu=document.createElement('div'),this.menu.className='jsoneditor-menu',this.frame.appendChild(this.menu);var o=document.createElement('button');o.type='button',o.className='jsoneditor-expand-all',o.title='Expand all fields',o.onclick=function(){t.expandAll()},this.menu.appendChild(o);var n=document.createElement('button');if(n.type='button',n.title='Collapse all fields',n.className='jsoneditor-collapse-all',n.onclick=function(){t.collapseAll()},this.menu.appendChild(n),this.history){var r=document.createElement('button');r.type='button',r.className='jsoneditor-undo jsoneditor-separator',r.title='Undo last action (Ctrl+Z)',r.onclick=function(){t._onUndo()},this.menu.appendChild(r),this.dom.undo=r;var i=document.createElement('button');i.type='button',i.className='jsoneditor-redo',i.title='Redo (Ctrl+Shift+Z)',i.onclick=function(){t._onRedo()},this.menu.appendChild(i),this.dom.redo=i,this.history.onChange=function(){r.disabled=!t.history.canUndo(),i.disabled=!t.history.canRedo()},this.history.onChange()}if(this.options&&this.options.modes&&this.options.modes.length){var a=this;this.modeSwitcher=new c(this.menu,this.options.modes,this.options.mode,function(e){a.modeSwitcher.destroy(),a.setMode(e),a.modeSwitcher.focus()})}this.options.search&&(this.searchBox=new s(this,this.menu))},u._onUndo=function(){this.history&&(this.history.undo(),this._onChange())},u._onRedo=function(){this.history&&(this.history.redo(),this._onChange())},u._onEvent=function(e){'keydown'==e.type&&this._onKeyDown(e),'focus'==e.type&&(this.focusTarget=e.target),'mousedown'==e.type&&this._startDragDistance(e),('mousemove'==e.type||'mouseup'==e.type||'click'==e.type)&&this._updateDragDistance(e);var t=d.getNodeFromTarget(e.target);if(t&&t.selected){if('click'==e.type){if(e.target==t.dom.menu)return void this.showContextMenu(e.target);e.hasMoved||this.deselect()}'mousedown'==e.type&&d.onDragStart(this.multiselection.nodes,e)}else'mousedown'==e.type&&(this.deselect(),t&&e.target==t.dom.drag?d.onDragStart(t,e):(!t||e.target!=t.dom.field&&e.target!=t.dom.value&&e.target!=t.dom.select)&&this._onMultiSelectStart(e));t&&t.onEvent(e)},u._startDragDistance=function(e){this.dragDistanceEvent={initialTarget:e.target,initialPageX:e.pageX,initialPageY:e.pageY,dragDistance:0,hasMoved:!1}},u._updateDragDistance=function(e){this.dragDistanceEvent||this._startDragDistance(e);var t=e.pageX-this.dragDistanceEvent.initialPageX,o=e.pageY-this.dragDistanceEvent.initialPageY;return this.dragDistanceEvent.dragDistance=Math.sqrt(t*t+o*o),this.dragDistanceEvent.hasMoved=this.dragDistanceEvent.hasMoved||10<this.dragDistanceEvent.dragDistance,e.dragDistance=this.dragDistanceEvent.dragDistance,e.hasMoved=this.dragDistanceEvent.hasMoved,e.dragDistance},u._onMultiSelectStart=function(e){var t=d.getNodeFromTarget(e.target);if('tree'===this.options.mode&&void 0===this.options.onEditable){this.multiselection={start:t||null,end:null,nodes:[]},this._startDragDistance(e);var o=this;this.mousemove||(this.mousemove=p.addEventListener(window,'mousemove',function(e){o._onMultiSelect(e)})),this.mouseup||(this.mouseup=p.addEventListener(window,'mouseup',function(e){o._onMultiSelectEnd(e)}))}},u._onMultiSelect=function(e){if(e.preventDefault(),this._updateDragDistance(e),!!e.hasMoved){var t=d.getNodeFromTarget(e.target);t&&(null==this.multiselection.start&&(this.multiselection.start=t),this.multiselection.end=t),this.deselect();var o=this.multiselection.start,n=this.multiselection.end||this.multiselection.start;o&&n&&(this.multiselection.nodes=this._findTopLevelNodes(o,n),this.select(this.multiselection.nodes))}},u._onMultiSelectEnd=function(){this.multiselection.nodes[0]&&this.multiselection.nodes[0].dom.menu.focus(),this.multiselection.start=null,this.multiselection.end=null,this.mousemove&&(p.removeEventListener(window,'mousemove',this.mousemove),delete this.mousemove),this.mouseup&&(p.removeEventListener(window,'mouseup',this.mouseup),delete this.mouseup)},u.deselect=function(e){this.multiselection.nodes.forEach(function(e){e.setSelected(!1)}),this.multiselection.nodes=[],e&&(this.multiselection.start=null,this.multiselection.end=null)},u.select=function(e){if(!Array.isArray(e))return this.select([e]);if(e){this.deselect(),this.multiselection.nodes=e.slice(0);var t=e[0];e.forEach(function(e){e.setSelected(!0,e===t)})}},u._findTopLevelNodes=function(t,o){for(var n=t.getNodePath(),a=o.getNodePath(),s=0;s<n.length&&n[s]===a[s];)s++;var i=n[s-1],l=n[s],d=a[s];if(l&&d||(i.parent?(l=i,d=i,i=i.parent):(l=i.childs[0],d=i.childs[i.childs.length-1])),i&&l&&d){var c=i.childs.indexOf(l),p=i.childs.indexOf(d),u=r(c,p),h=e(c,p);return i.childs.slice(u,h+1)}return[]},u._onKeyDown=function(e){var t=e.which||e.keyCode,o=e.ctrlKey,n=e.shiftKey,r=!1;if(9==t){var i=this;setTimeout(function(){p.selectContentEditable(i.focusTarget)},0)}if(this.searchBox)if(o&&70==t)this.searchBox.dom.search.focus(),this.searchBox.dom.search.select(),r=!0;else if(114==t||o&&71==t){var a=!0;n?this.searchBox.previous(a):this.searchBox.next(a),r=!0}this.history&&(o&&!n&&90==t?(this._onUndo(),r=!0):o&&n&&90==t&&(this._onRedo(),r=!0)),r&&(e.preventDefault(),e.stopPropagation())},u._createTable=function(){var e=document.createElement('div');e.className='jsoneditor-outer',this.contentOuter=e,this.content=document.createElement('div'),this.content.className='jsoneditor-tree',e.appendChild(this.content),this.table=document.createElement('table'),this.table.className='jsoneditor-tree',this.content.appendChild(this.table);var t;this.colgroupContent=document.createElement('colgroup'),'tree'===this.options.mode&&(t=document.createElement('col'),t.width='24px',this.colgroupContent.appendChild(t)),t=document.createElement('col'),t.width='24px',this.colgroupContent.appendChild(t),t=document.createElement('col'),this.colgroupContent.appendChild(t),this.table.appendChild(this.colgroupContent),this.tbody=document.createElement('tbody'),this.table.appendChild(this.tbody),this.frame.appendChild(e)},u.showContextMenu=function(e,t){var o=[],n=this;o.push({text:'Duplicate',title:'Duplicate selected fields (Ctrl+D)',className:'jsoneditor-duplicate',click:function(){d.onDuplicate(n.multiselection.nodes)}}),o.push({text:'Remove',title:'Remove selected fields (Ctrl+Del)',className:'jsoneditor-remove',click:function(){d.onRemove(n.multiselection.nodes)}});var r=new l(o,{close:t});r.show(e,this.content)},t.exports=[{mode:'tree',mixin:u,data:'json'},{mode:'view',mixin:u,data:'json'},{mode:'form',mixin:u,data:'json'}]},function(e){'use strict';function t(){this.locked=!1}t.prototype.highlight=function(e){this.locked||(this.node!=e&&(this.node&&this.node.setHighlight(!1),this.node=e,this.node.setHighlight(!0)),this._cancelUnhighlight())},t.prototype.unhighlight=function(){if(!this.locked){var e=this;this.node&&(this._cancelUnhighlight(),this.unhighlightTimer=setTimeout(function(){e.node.setHighlight(!1),e.node=void 0,e.unhighlightTimer=void 0},0))}},t.prototype._cancelUnhighlight=function(){this.unhighlightTimer&&(clearTimeout(this.unhighlightTimer),this.unhighlightTimer=void 0)},t.prototype.lock=function(){this.locked=!0},t.prototype.unlock=function(){this.locked=!1},e.exports=t},function(e,t,o){'use strict';function n(e){this.editor=e,this.history=[],this.index=-1,this.clear(),this.actions={editField:{undo:function(e){e.node.updateField(e.oldValue)},redo:function(e){e.node.updateField(e.newValue)}},editValue:{undo:function(e){e.node.updateValue(e.oldValue)},redo:function(e){e.node.updateValue(e.newValue)}},changeType:{undo:function(e){e.node.changeType(e.oldType)},redo:function(e){e.node.changeType(e.newType)}},appendNodes:{undo:function(e){e.nodes.forEach(function(t){e.parent.removeChild(t)})},redo:function(e){e.nodes.forEach(function(t){e.parent.appendChild(t)})}},insertBeforeNodes:{undo:function(e){e.nodes.forEach(function(t){e.parent.removeChild(t)})},redo:function(e){e.nodes.forEach(function(t){e.parent.insertBefore(t,e.beforeNode)})}},insertAfterNodes:{undo:function(e){e.nodes.forEach(function(t){e.parent.removeChild(t)})},redo:function(e){var t=e.afterNode;e.nodes.forEach(function(o){e.parent.insertAfter(e.node,t),t=o})}},removeNodes:{undo:function(e){var t=e.parent,o=t.childs[e.index]||t.append;e.nodes.forEach(function(e){t.insertBefore(e,o)})},redo:function(e){e.nodes.forEach(function(t){e.parent.removeChild(t)})}},duplicateNodes:{undo:function(e){e.nodes.forEach(function(t){e.parent.removeChild(t)})},redo:function(e){var t=e.afterNode;e.nodes.forEach(function(o){e.parent.insertAfter(o,t),t=o})}},moveNodes:{undo:function(e){e.nodes.forEach(function(t){e.oldBeforeNode.parent.moveBefore(t,e.oldBeforeNode)})},redo:function(e){e.nodes.forEach(function(t){e.newBeforeNode.parent.moveBefore(t,e.newBeforeNode)})}},sort:{undo:function(e){var t=e.node;t.hideChilds(),t.sort=e.oldSort,t.childs=e.oldChilds,t.showChilds()},redo:function(e){var t=e.node;t.hideChilds(),t.sort=e.newSort,t.childs=e.newChilds,t.showChilds()}}}}o(4);n.prototype.onChange=function(){},n.prototype.add=function(e,t){this.index++,this.history[this.index]={action:e,params:t,timestamp:new Date},this.index<this.history.length-1&&this.history.splice(this.index+1,this.history.length-this.index-1),this.onChange()},n.prototype.clear=function(){this.history=[],this.index=-1,this.onChange()},n.prototype.canUndo=function(){return 0<=this.index},n.prototype.canRedo=function(){return this.index<this.history.length-1},n.prototype.undo=function(){if(this.canUndo()){var e=this.history[this.index];if(e){var t=this.actions[e.action];t&&t.undo?(t.undo(e.params),e.params.oldSelection&&this.editor.setSelection(e.params.oldSelection)):console.error(new Error('unknown action "'+e.action+'"'))}this.index--,this.onChange()}},n.prototype.redo=function(){if(this.canRedo()){this.index++;var e=this.history[this.index];if(e){var t=this.actions[e.action];t&&t.redo?(t.redo(e.params),e.params.newSelection&&this.editor.setSelection(e.params.newSelection)):console.error(new Error('unknown action "'+e.action+'"'))}this.onChange()}},n.prototype.destroy=function(){this.editor=null,this.history=[],this.index=-1},e.exports=n},function(e,t,o){'use strict';var n=o(5);t.parse=function(e){try{return JSON.parse(e)}catch(o){throw t.validate(e),o}},t.sanitize=function(e){function t(){return e.charAt(p)}function o(){return e.charAt(p+1)}function n(){return e.charAt(p-1)}function r(){for(var e=u.length-1;0<=e;){var t=u[e];if(' '!==t&&'\n'!==t&&'\r'!==t&&'\t'!==t)return t;e--}return''}function a(){for(p+=2;p<e.length&&('*'!==t()||'/'!==o());)p++;p+=2}function s(){for(p+=2;p<e.length&&'\n'!==t();)p++}function l(o){u.push('"'),p++;for(var r=t();p<e.length&&r!==o;)'"'===r&&'\\'!==n()&&u.push('\\'),'\\'===r&&(p++,r=t(),'\''!==r&&u.push('\\')),u.push(r),p++,r=t();r===o&&(u.push('"'),p++)}function d(){for(var e=['null','true','false'],o='',n=t(),r=/[a-zA-Z_$\d]/;r.test(n);)o+=n,p++,n=t();-1===e.indexOf(o)?u.push('"'+o+'"'):u.push(o)}var u=[],p=0,i=e.match(/^\s*(\/\*(.|[\r\n])*?\*\/)?\s*[\da-zA-Z_$]+\s*\(([\s\S]*)\)\s*;?\s*$/);for(i&&(e=i[3]);p<e.length;){var h=t();'/'===h&&'*'===o()?a():'/'===h&&'/'===o()?s():'\''===h||'"'===h?l(h):/[a-zA-Z_$]/.test(h)&&-1!==['{',','].indexOf(r())?d():(u.push(h),p++)}return u.join('')},t.escapeUnicodeChars=function(e){return e.replace(/[\u007F-\uFFFF]/g,function(e){return'\\u'+('0000'+e.charCodeAt(0).toString(16)).slice(-4)})},t.validate=function(e){'undefined'==typeof n?JSON.parse(e):n.parse(e)},t.extend=function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e},t.clear=function(e){for(var t in e)e.hasOwnProperty(t)&&delete e[t];return e},t.type=function(e){return null===e?'null':void 0===e?'undefined':e instanceof Number||'number'===typeof e?'number':e instanceof String||'string'===typeof e?'string':e instanceof Boolean||'boolean'===typeof e?'boolean':e instanceof RegExp||'regexp'===typeof e?'regexp':t.isArray(e)?'array':'object'};var r=/^https?:\/\/\S+$/;t.isUrl=function(e){return('string'==typeof e||e instanceof String)&&r.test(e)},t.isArray=function(e){return'[object Array]'===Object.prototype.toString.call(e)},t.getAbsoluteLeft=function(e){var t=e.getBoundingClientRect();return t.left+window.pageXOffset||document.scrollLeft||0},t.getAbsoluteTop=function(e){var t=e.getBoundingClientRect();return t.top+window.pageYOffset||document.scrollTop||0},t.addClassName=function(e,t){var o=e.className.split(' ');-1==o.indexOf(t)&&(o.push(t),e.className=o.join(' '))},t.removeClassName=function(e,t){var o=e.className.split(' '),n=o.indexOf(t);-1!=n&&(o.splice(n,1),e.className=o.join(' '))},t.stripFormatting=function(e){for(var o=e.childNodes,n=0,r=o.length,i;n<r;n++){i=o[n],i.style&&i.removeAttribute('style');var a=i.attributes;if(a)for(var s=a.length-1,l;0<=s;s--)l=a[s],!0===l.specified&&i.removeAttribute(l.name);t.stripFormatting(i)}},t.setEndOfContentEditable=function(e){var t,o;document.createRange&&(t=document.createRange(),t.selectNodeContents(e),t.collapse(!1),o=window.getSelection(),o.removeAllRanges(),o.addRange(t))},t.selectContentEditable=function(e){if(e&&'DIV'==e.nodeName){var t,o;window.getSelection&&document.createRange&&(o=document.createRange(),o.selectNodeContents(e),t=window.getSelection(),t.removeAllRanges(),t.addRange(o))}},t.getSelection=function(){if(window.getSelection){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount)return e.getRangeAt(0)}return null},t.setSelection=function(e){if(e&&window.getSelection){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}},t.getSelectionOffset=function(){var e=t.getSelection();return e&&'startOffset'in e&&'endOffset'in e&&e.startContainer&&e.startContainer==e.endContainer?{startOffset:e.startOffset,endOffset:e.endOffset,container:e.startContainer.parentNode}:null},t.setSelectionOffset=function(e){if(document.createRange&&window.getSelection){var o=window.getSelection();if(o){var n=document.createRange();e.container.firstChild||e.container.appendChild(document.createTextNode('')),n.setStart(e.container.firstChild,e.startOffset),n.setEnd(e.container.firstChild,e.endOffset),t.setSelection(n)}}},t.getInnerText=function(e,o){var n=void 0==o;if(n&&(o={text:'',flush:function(){var e=this.text;return this.text='',e},set:function(e){this.text=e}}),e.nodeValue)return o.flush()+e.nodeValue;if(e.hasChildNodes()){for(var r=e.childNodes,a='',s=0,i=r.length,l;s<i;s++)if(l=r[s],'DIV'==l.nodeName||'P'==l.nodeName){var d=r[s-1],c=d?d.nodeName:void 0;c&&'DIV'!=c&&'P'!=c&&'BR'!=c&&(a+='\n',o.flush()),a+=t.getInnerText(l,o),o.set('\n')}else'BR'==l.nodeName?(a+=o.flush(),o.set('\n')):a+=t.getInnerText(l,o);return a}return'P'==e.nodeName&&-1!=t.getInternetExplorerVersion()?o.flush():''},t.getInternetExplorerVersion=function(){if(-1==i){var e=-1;if('Microsoft Internet Explorer'==navigator.appName){var t=navigator.userAgent,o=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=o.exec(t)&&(e=parseFloat(RegExp.$1))}i=e}return i},t.isFirefox=function(){return-1!=navigator.userAgent.indexOf('Firefox')};var i=-1;t.addEventListener=function(e,o,n,r){if(e.addEventListener)return void 0===r&&(r=!1),'mousewheel'===o&&t.isFirefox()&&(o='DOMMouseScroll'),e.addEventListener(o,n,r),n;if(e.attachEvent){var i=function(){return n.call(e,window.event)};return e.attachEvent('on'+o,i),i}},t.removeEventListener=function(e,o,n,r){e.removeEventListener?(r===void 0&&(r=!1),'mousewheel'===o&&t.isFirefox()&&(o='DOMMouseScroll'),e.removeEventListener(o,n,r)):e.detachEvent&&e.detachEvent('on'+o,n)},t.parsePath=function e(t){var o,n;if(0===t.length)return[];var r=t.match(/^\.(\w+)/);if(r)o=r[1],n=t.substr(o.length+1);else if('['===t[0]){var i=t.indexOf(']');if(-1===i)throw new SyntaxError('Character ] expected in path');if(1===i)throw new SyntaxError('Index expected after [');var a=t.substring(1,i);'\''===a[0]&&(a='"'+a.substring(1,a.length-1)+'"'),o='*'===a?a:JSON.parse(a),n=t.substr(i+1)}else throw new SyntaxError('Failed to parse path');return[o].concat(e(n))},t.improveSchemaError=function(e){if('enum'===e.keyword&&Array.isArray(e.schema)){var t=e.schema;if(t){if(t=t.map(function(e){return JSON.stringify(e)}),5<t.length){var o=['('+(t.length-5)+' more...)'];t=t.slice(0,5),t.push(o)}e.message='should be equal to one of: '+t.join(', ')}}return'additionalProperties'===e.keyword&&(e.message='should NOT have additional property: '+e.params.additionalProperty),e},t.insideRect=function(e,t,o){var n=o===void 0?0:o;return t.left-n>=e.left&&t.right+n<=e.right&&t.top-n>=e.top&&t.bottom+n<=e.bottom},t.debounce=function(e,t,o){var n;return function(){var r=this,i=arguments,a=o&&!n;clearTimeout(n),n=setTimeout(function(){n=null,o||e.apply(r,i)},t),a&&e.apply(r,i)}},t.textDiff=function(e,t){for(var o=t.length,n=0,r=e.length,i=t.length;t.charAt(n)===e.charAt(n)&&n<o;)n++;for(;t.charAt(i-1)===e.charAt(r-1)&&i>n&&0<r;)i--,r--;return{start:n,end:i}}},function(e,t){var o=function(){var e={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:'error',4:'STRING',6:'NUMBER',8:'NULL',10:'TRUE',11:'FALSE',14:'EOF',17:'{',18:'}',21:':',22:',',23:'[',24:']'},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(e,t,o,n,r,i){var a=i.length-1;switch(r){case 1:this.$=e.replace(/\\(\\|")/g,'$1').replace(/\\n/g,'\n').replace(/\\r/g,'\r').replace(/\\t/g,'\t').replace(/\\v/g,'\x0B').replace(/\\f/g,'\f').replace(/\\b/g,'\b');break;case 2:this.$=+e;break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=i[a-1];break;case 13:this.$={};break;case 14:this.$=i[a-1];break;case 15:this.$=[i[a-2],i[a]];break;case 16:this.$={},this.$[i[a][0]]=i[a][1];break;case 17:this.$=i[a-2],i[a-2][i[a][0]]=i[a][1];break;case 18:this.$=[];break;case 19:this.$=i[a-1];break;case 20:this.$=[i[a]];break;case 21:this.$=i[a-2],i[a-2].push(i[a]);}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(e){throw new Error(e)},parse:function(e){function t(e){i.length-=2*e,a.length-=e,s.length-=e}function o(){var e;return e=n.lexer.lex()||1,'number'!==typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],a=[null],s=[],l=this.table,d='',c=0,u=0,h=0,m=2;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,'undefined'==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var g=this.lexer.yylloc;s.push(g),'function'===typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var f={},y,b,v,x,w,_,p,E,C;;){v=i[i.length-1],this.defaultActions[v]?x=this.defaultActions[v]:(null==y&&(y=o()),x=l[v]&&l[v][y]);_handle_error:if('undefined'===typeof x||!x.length||!x[0]){if(!h){for(_ in C=[],l[v])this.terminals_[_]&&2<_&&C.push('\''+this.terminals_[_]+'\'');var j='';j=this.lexer.showPosition?'Parse error on line '+(c+1)+':\n'+this.lexer.showPosition()+'\nExpecting '+C.join(', ')+', got \''+this.terminals_[y]+'\'':'Parse error on line '+(c+1)+': Unexpected '+(1==y?'end of input':'\''+(this.terminals_[y]||y)+'\''),this.parseError(j,{text:this.lexer.match,token:this.terminals_[y]||y,line:this.lexer.yylineno,loc:g,expected:C})}if(3==h){if(y==1)throw new Error(j||'Parsing halted.');u=this.lexer.yyleng,d=this.lexer.yytext,c=this.lexer.yylineno,g=this.lexer.yylloc,y=o()}for(;!(m.toString()in l[v]);){if(0==v)throw new Error(j||'Parsing halted.');t(1),v=i[i.length-1]}b=y,y=m,v=i[i.length-1],x=l[v]&&l[v][m],h=3}if(x[0]instanceof Array&&1<x.length)throw new Error('Parse Error: multiple actions possible at state: '+v+', token: '+y);switch(x[0]){case 1:i.push(y),a.push(this.lexer.yytext),s.push(this.lexer.yylloc),i.push(x[1]),y=null,b?(y=b,b=null):(u=this.lexer.yyleng,d=this.lexer.yytext,c=this.lexer.yylineno,g=this.lexer.yylloc,0<h&&h--);break;case 2:if(p=this.productions_[x[1]][1],f.$=a[a.length-p],f._$={first_line:s[s.length-(p||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(p||1)].first_column,last_column:s[s.length-1].last_column},w=this.performAction.call(f,d,u,c,this.yy,x[1],a,s),'undefined'!==typeof w)return w;p&&(i=i.slice(0,2*(-1*p)),a=a.slice(0,-1*p),s=s.slice(0,-1*p)),i.push(this.productions_[x[1]][0]),a.push(f.$),s.push(f._$),E=l[i[i.length-2]][i[i.length-1]],i.push(E);break;case 3:return!0;}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(this.yy.parseError)this.yy.parseError(e,t);else throw new Error(e)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match='',this.conditionStack=['INITIAL'],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.match+=e,this.matched+=e;var t=e.match(/\n/);return t&&this.yylineno++,this._input=this._input.slice(1),e},unput:function(e){return this._input=e+this._input,this},more:function(){return this._more=!0,this},less:function(e){this._input=this.match.slice(e)+this._input},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(20<e.length?'...':'')+e.substr(-20).replace(/\n/g,'')},upcomingInput:function(){var e=this.match;return 20>e.length&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(20<e.length?'...':'')).replace(/\n/g,'')},showPosition:function(){var e=this.pastInput(),t=Array(e.length+1).join('-');return e+this.upcomingInput()+'\n'+t+'^'},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,o,n,r;this._more||(this.yytext='',this.match='');for(var a=this._currentRules(),s=0;s<a.length&&(o=this._input.match(this.rules[a[s]]),!(o&&(!t||o[0].length>t[0].length)&&(t=o,n=s,!this.options.flex)));s++);return t?(r=t[0].match(/\n.*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-1:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,a[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):''===this._input?this.EOF:void this.parseError('Lexical error on line '+(this.yylineno+1)+'. Unrecognized text.\n'+this.showPosition(),{text:'',token:null,line:this.yylineno})},lex:function(){var e=this.next();return'undefined'===typeof e?this.lex():e},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,o,n){switch(o){case 0:break;case 1:return 6;break;case 2:return t.yytext=t.yytext.substr(1,t.yyleng-2),4;break;case 3:return 17;break;case 4:return 18;break;case 5:return 23;break;case 6:return 24;break;case 7:return 22;break;case 8:return 21;break;case 9:return 10;break;case 10:return 11;break;case 11:return 8;break;case 12:return 14;break;case 13:return'INVALID';}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return e}();return e.lexer=t,e}();t.parser=o,t.parse=o.parse.bind(o)},function(e){'use strict';function t(e,t){var o=this;this.editor=e,this.timeout=void 0,this.delay=200,this.lastText=void 0,this.dom={},this.dom.container=t;var n=document.createElement('table');this.dom.table=n,n.className='jsoneditor-search',t.appendChild(n);var r=document.createElement('tbody');this.dom.tbody=r,n.appendChild(r);var i=document.createElement('tr');r.appendChild(i);var a=document.createElement('td');i.appendChild(a);var s=document.createElement('div');this.dom.results=s,s.className='jsoneditor-results',a.appendChild(s),a=document.createElement('td'),i.appendChild(a);var l=document.createElement('div');this.dom.input=l,l.className='jsoneditor-frame',l.title='Search fields and values',a.appendChild(l);var d=document.createElement('table');l.appendChild(d);var c=document.createElement('tbody');d.appendChild(c),i=document.createElement('tr'),c.appendChild(i);var p=document.createElement('button');p.type='button',p.className='jsoneditor-refresh',a=document.createElement('td'),a.appendChild(p),i.appendChild(a);var u=document.createElement('input');this.dom.search=u,u.oninput=function(e){o._onDelayedSearch(e)},u.onchange=function(){o._onSearch()},u.onkeydown=function(e){o._onKeyDown(e)},u.onkeyup=function(e){o._onKeyUp(e)},p.onclick=function(){u.select()},a=document.createElement('td'),a.appendChild(u),i.appendChild(a);var h=document.createElement('button');h.type='button',h.title='Next result (Enter)',h.className='jsoneditor-next',h.onclick=function(){o.next()},a=document.createElement('td'),a.appendChild(h),i.appendChild(a);var m=document.createElement('button');m.type='button',m.title='Previous result (Shift+Enter)',m.className='jsoneditor-previous',m.onclick=function(){o.previous()},a=document.createElement('td'),a.appendChild(m),i.appendChild(a)}t.prototype.next=function(e){if(this.results!=void 0){var t=this.resultIndex==void 0?0:this.resultIndex+1;t>this.results.length-1&&(t=0),this._setActiveResult(t,e)}},t.prototype.previous=function(e){if(this.results!=void 0){var t=this.results.length-1,o=this.resultIndex==void 0?t:this.resultIndex-1;0>o&&(o=t),this._setActiveResult(o,e)}},t.prototype._setActiveResult=function(e,t){if(this.activeResult){var o=this.activeResult.node,n=this.activeResult.elem;'field'==n?delete o.searchFieldActive:delete o.searchValueActive,o.updateDom()}if(!this.results||!this.results[e])return this.resultIndex=void 0,void(this.activeResult=void 0);this.resultIndex=e;var r=this.results[this.resultIndex].node,i=this.results[this.resultIndex].elem;'field'==i?r.searchFieldActive=!0:r.searchValueActive=!0,this.activeResult=this.results[this.resultIndex],r.updateDom(),r.scrollTo(function(){t&&r.focus(i)})},t.prototype._clearDelay=function(){this.timeout!=void 0&&(clearTimeout(this.timeout),delete this.timeout)},t.prototype._onDelayedSearch=function(){this._clearDelay();var e=this;this.timeout=setTimeout(function(){e._onSearch()},this.delay)},t.prototype._onSearch=function(e){this._clearDelay();var t=this.dom.search.value,o=0<t.length?t:void 0;if(o!=this.lastText||e)if(this.lastText=o,this.results=this.editor.search(o),this._setActiveResult(void 0),void 0!=o){var n=this.results.length;this.dom.results.innerHTML=0===n?'no&nbsp;results':1===n?'1&nbsp;result':n+'&nbsp;results'}else this.dom.results.innerHTML=''},t.prototype._onKeyDown=function(e){var t=e.which;27==t?(this.dom.search.value='',this._onSearch(),e.preventDefault(),e.stopPropagation()):13==t&&(e.ctrlKey?this._onSearch(!0):e.shiftKey?this.previous():this.next(),e.preventDefault(),e.stopPropagation())},t.prototype._onKeyUp=function(e){var t=e.keyCode;27!=t&&13!=t&&this._onDelayedSearch(e)},t.prototype.clear=function(){this.dom.search.value='',this._onSearch()},t.prototype.destroy=function(){this.editor=null,this.dom.container.removeChild(this.dom.table),this.dom=null,this.results=null,this.activeResult=null,this._clearDelay()},e.exports=t},function(t,o,n){'use strict';function r(t,o){function n(e,t,o){o.forEach(function(o){if('separator'==o.type){var i=document.createElement('div');i.className='jsoneditor-separator',s=document.createElement('li'),s.appendChild(i),e.appendChild(s)}else{var a={},s=document.createElement('li');e.appendChild(s);var l=document.createElement('button');if(l.type='button',l.className=o.className,a.button=l,o.title&&(l.title=o.title),o.click&&(l.onclick=function(e){e.preventDefault(),r.hide(),o.click()}),s.appendChild(l),o.submenu){var d=document.createElement('div');d.className='jsoneditor-icon',l.appendChild(d),l.appendChild(document.createTextNode(o.text));var c;if(o.click){l.className+=' jsoneditor-default';var p=document.createElement('button');p.type='button',a.buttonExpand=p,p.className='jsoneditor-expand',p.innerHTML='<div class="jsoneditor-expand"></div>',s.appendChild(p),o.submenuTitle&&(p.title=o.submenuTitle),c=p}else{var u=document.createElement('div');u.className='jsoneditor-expand',l.appendChild(u),c=l}c.onclick=function(e){e.preventDefault(),r._onExpandItem(a),c.focus()};var h=[];a.subItems=h;var m=document.createElement('ul');a.ul=m,m.className='jsoneditor-menu',m.style.height='0',s.appendChild(m),n(m,h,o.submenu)}else l.innerHTML='<div class="jsoneditor-icon"></div>'+o.text;t.push(a)}})}this.dom={};var r=this,i=this.dom;this.anchor=void 0,this.items=t,this.eventListeners={},this.selection=void 0,this.onClose=o?o.close:void 0;var a=document.createElement('div');a.className='jsoneditor-contextmenu-root',i.root=a;var s=document.createElement('div');s.className='jsoneditor-contextmenu',i.menu=s,a.appendChild(s);var l=document.createElement('ul');l.className='jsoneditor-menu',s.appendChild(l),i.list=l,i.items=[];var d=document.createElement('button');d.type='button',i.focusButton=d;var c=document.createElement('li');c.style.overflow='hidden',c.style.height='0',c.appendChild(d),l.appendChild(c),n(l,this.dom.items,t),this.maxHeight=0,t.forEach(function(o){var n=24*(t.length+(o.submenu?o.submenu.length:0));r.maxHeight=e(r.maxHeight,n)})}var i=n(4);r.prototype._getVisibleButtons=function(){var e=[],t=this;return this.dom.items.forEach(function(o){e.push(o.button),o.buttonExpand&&e.push(o.buttonExpand),o.subItems&&o==t.expandedItem&&o.subItems.forEach(function(t){e.push(t.button),t.buttonExpand&&e.push(t.buttonExpand)})}),e},r.visibleMenu=void 0,r.prototype.show=function(e,t){this.hide();var o=!0;if(t){var n=e.getBoundingClientRect(),a=t.getBoundingClientRect();n.bottom+this.maxHeight<a.bottom||n.top-this.maxHeight>a.top&&(o=!1)}if(o){var s=e.offsetHeight;this.dom.menu.style.left='0px',this.dom.menu.style.top=s+'px',this.dom.menu.style.bottom=''}else this.dom.menu.style.left='0px',this.dom.menu.style.top='',this.dom.menu.style.bottom='0px';var l=e.parentNode;l.insertBefore(this.dom.root,l.firstChild);var d=this,c=this.dom.list;this.eventListeners.mousedown=i.addEventListener(window,'mousedown',function(e){var t=e.path[0];t==c||d._isChildOf(t,c)||(d.hide(),e.stopPropagation(),e.preventDefault())}),this.eventListeners.keydown=i.addEventListener(window,'keydown',function(e){d._onKeyDown(e)}),this.selection=i.getSelection(),this.anchor=e,setTimeout(function(){d.dom.focusButton.focus()},0),r.visibleMenu&&r.visibleMenu.hide(),r.visibleMenu=this},r.prototype.hide=function(){for(var e in this.dom.root.parentNode&&(this.dom.root.parentNode.removeChild(this.dom.root),this.onClose&&this.onClose()),this.eventListeners)if(this.eventListeners.hasOwnProperty(e)){var t=this.eventListeners[e];t&&i.removeEventListener(window,e,t),delete this.eventListeners[e]}r.visibleMenu==this&&(r.visibleMenu=void 0)},r.prototype._onExpandItem=function(e){var t=this,o=e==this.expandedItem,n=this.expandedItem;if(n&&(n.ul.style.height='0',n.ul.style.padding='',setTimeout(function(){t.expandedItem!=n&&(n.ul.style.display='',i.removeClassName(n.ul.parentNode,'jsoneditor-selected'))},300),this.expandedItem=void 0),!o){var r=e.ul;r.style.display='block';r.clientHeight;setTimeout(function(){t.expandedItem==e&&(r.style.height=24*r.childNodes.length+'px',r.style.padding='5px 10px')},0),i.addClassName(r.parentNode,'jsoneditor-selected'),this.expandedItem=e}},r.prototype._onKeyDown=function(e){var t=e.target,o=e.which,n=!1,r,a,s,l;27==o?(this.selection&&i.setSelection(this.selection),this.anchor&&this.anchor.focus(),this.hide(),n=!0):9==o?e.shiftKey?(r=this._getVisibleButtons(),a=r.indexOf(t),0==a&&(r[r.length-1].focus(),n=!0)):(r=this._getVisibleButtons(),a=r.indexOf(t),a==r.length-1&&(r[0].focus(),n=!0)):37==o?('jsoneditor-expand'==t.className&&(r=this._getVisibleButtons(),a=r.indexOf(t),s=r[a-1],s&&s.focus()),n=!0):38==o?(r=this._getVisibleButtons(),a=r.indexOf(t),s=r[a-1],s&&'jsoneditor-expand'==s.className&&(s=r[a-2]),!s&&(s=r[r.length-1]),s&&s.focus(),n=!0):39==o?(r=this._getVisibleButtons(),a=r.indexOf(t),l=r[a+1],l&&'jsoneditor-expand'==l.className&&l.focus(),n=!0):40==o&&(r=this._getVisibleButtons(),a=r.indexOf(t),l=r[a+1],l&&'jsoneditor-expand'==l.className&&(l=r[a+2]),!l&&(l=r[0]),l&&(l.focus(),n=!0),n=!0),n&&(e.stopPropagation(),e.preventDefault())},r.prototype._isChildOf=function(t,o){for(var n=t.parentNode;n;){if(n==o)return!0;n=n.parentNode}return!1},t.exports=r},function(e,t,o){'use strict';function n(e,t){this.editor=e,this.dom={},this.expanded=!1,t&&t instanceof Object?(this.setField(t.field,t.fieldEditable),this.setValue(t.value,t.type)):(this.setField(''),this.setValue(null)),this._debouncedOnChangeValue=s.debounce(this._onChangeValue.bind(this),n.prototype.DEBOUNCE_INTERVAL),this._debouncedOnChangeField=s.debounce(this._onChangeField.bind(this),n.prototype.DEBOUNCE_INTERVAL)}var r=o(9),i=o(7),a=o(10),s=o(4);n.prototype.DEBOUNCE_INTERVAL=150,n.prototype._updateEditability=function(){if(this.editable={field:!0,value:!0},this.editor&&(this.editable.field='tree'===this.editor.options.mode,this.editable.value='view'!==this.editor.options.mode,('tree'===this.editor.options.mode||'form'===this.editor.options.mode)&&'function'===typeof this.editor.options.onEditable)){var e=this.editor.options.onEditable({field:this.field,value:this.value,path:this.getPath()});'boolean'===typeof e?(this.editable.field=e,this.editable.value=e):('boolean'===typeof e.field&&(this.editable.field=e.field),'boolean'===typeof e.value&&(this.editable.value=e.value))}},n.prototype.getPath=function(){for(var e=this,t=[];e;){var o=e.parent?'array'==e.parent.type?e.index:e.field:void 0;o!==void 0&&t.unshift(o),e=e.parent}return t},n.prototype.findNode=function(e){for(var t=s.parsePath(e),o=this;o&&0<t.length;){var n=t.shift();if('number'===typeof n){if('array'!==o.type)throw new Error('Cannot get child node at index '+n+': node is no array');o=o.childs[n]}else{if('object'!==o.type)throw new Error('Cannot get child node '+n+': node is no object');o=o.childs.filter(function(e){return e.field===n})[0]}}return o},n.prototype.findParents=function(){for(var e=[],t=this.parent;t;)e.unshift(t),t=t.parent;return e},n.prototype.setError=function(e,t){this.getDom(),this.error=e;var o=this.dom.tdError;if(e){o||(o=document.createElement('td'),this.dom.tdError=o,this.dom.tdValue.parentNode.appendChild(o));var n=document.createElement('div');n.className='jsoneditor-popover jsoneditor-right',n.appendChild(document.createTextNode(e.message));var r=document.createElement('button');for(r.type='button',r.className='jsoneditor-schema-error',r.appendChild(n),r.onmouseover=r.onfocus=function(){for(var e=['right','above','below','left'],t=0,o;t<e.length;t++){o=e[t],n.className='jsoneditor-popover jsoneditor-'+o;var r=this.editor.content.getBoundingClientRect(),i=n.getBoundingClientRect(),a=s.insideRect(r,i,20);if(a)break}}.bind(this),t&&(r.onclick=function(){t.findParents().forEach(function(e){e.expand(!1)}),t.scrollTo(function(){t.focus()})});o.firstChild;)o.removeChild(o.firstChild);o.appendChild(r)}else o&&(this.dom.tdError.parentNode.removeChild(this.dom.tdError),delete this.dom.tdError)},n.prototype.getIndex=function(){return this.parent?this.parent.childs.indexOf(this):-1},n.prototype.setParent=function(e){this.parent=e},n.prototype.setField=function(e,t){this.field=e,this.previousField=e,this.fieldEditable=!0===t},n.prototype.getField=function(){return void 0===this.field&&this._getDomField(),this.field},n.prototype.setValue=function(e,t){var o=this.childs,r,a;if(o)for(;o.length;)this.removeChild(o[0]);if(this.type=this._getType(e),t&&t!=this.type)if('string'==t&&'auto'==this.type)this.type=t;else throw new Error('Type mismatch: cannot cast value of type "'+this.type+' to the specified type "'+t+'"');if('array'==this.type){this.childs=[];for(var s=0,i=e.length;s<i;s++)r=e[s],void 0===r||r instanceof Function||(a=new n(this.editor,{value:r}),this.appendChild(a));this.value=''}else if('object'==this.type){for(var l in this.childs=[],e)e.hasOwnProperty(l)&&(r=e[l],void 0===r||r instanceof Function||(a=new n(this.editor,{field:l,value:r}),this.appendChild(a)));this.value='',!0===this.editor.options.sortObjectKeys&&this.sort('asc')}else this.childs=void 0,this.value=e;this.previousValue=this.value},n.prototype.getValue=function(){if('array'==this.type){var e=[];return this.childs.forEach(function(t){e.push(t.getValue())}),e}if('object'==this.type){var t={};return this.childs.forEach(function(e){t[e.getField()]=e.getValue()}),t}return void 0===this.value&&this._getDomValue(),this.value},n.prototype.getLevel=function(){return this.parent?this.parent.getLevel()+1:0},n.prototype.getNodePath=function(){var e=this.parent?this.parent.getNodePath():[];return e.push(this),e},n.prototype.clone=function(){var e=new n(this.editor);if(e.type=this.type,e.field=this.field,e.fieldInnerText=this.fieldInnerText,e.fieldEditable=this.fieldEditable,e.value=this.value,e.valueInnerText=this.valueInnerText,e.expanded=this.expanded,this.childs){var t=[];this.childs.forEach(function(o){var n=o.clone();n.setParent(e),t.push(n)}),e.childs=t}else e.childs=void 0;return e},n.prototype.expand=function(e){this.childs&&(this.expanded=!0,this.dom.expand&&(this.dom.expand.className='jsoneditor-expanded'),this.showChilds(),!1!==e&&this.childs.forEach(function(t){t.expand(e)}))},n.prototype.collapse=function(e){this.childs&&(this.hideChilds(),!1!==e&&this.childs.forEach(function(t){t.collapse(e)}),this.dom.expand&&(this.dom.expand.className='jsoneditor-collapsed'),this.expanded=!1)},n.prototype.showChilds=function(){var e=this.childs;if(e&&this.expanded){var t=this.dom.tr,o=t?t.parentNode:void 0;if(o){var n=this.getAppend(),r=t.nextSibling;r?o.insertBefore(n,r):o.appendChild(n),this.childs.forEach(function(e){o.insertBefore(e.getDom(),n),e.showChilds()})}}},n.prototype.hide=function(){var e=this.dom.tr,t=e?e.parentNode:void 0;t&&t.removeChild(e),this.hideChilds()},n.prototype.hideChilds=function(){var e=this.childs;if(e&&this.expanded){var t=this.getAppend();t.parentNode&&t.parentNode.removeChild(t),this.childs.forEach(function(e){e.hide()})}},n.prototype.appendChild=function(e){if(this._hasChilds()){if(e.setParent(this),e.fieldEditable='object'==this.type,'array'==this.type&&(e.index=this.childs.length),this.childs.push(e),this.expanded){var t=e.getDom(),o=this.getAppend(),n=o?o.parentNode:void 0;o&&n&&n.insertBefore(t,o),e.showChilds()}this.updateDom({updateIndexes:!0}),e.updateDom({recurse:!0})}},n.prototype.moveBefore=function(e,t){if(this._hasChilds()){var o=this.dom.tr?this.dom.tr.parentNode:void 0;if(o){var n=document.createElement('tr');n.style.height=o.clientHeight+'px',o.appendChild(n)}e.parent&&e.parent.removeChild(e),t instanceof l?this.appendChild(e):this.insertBefore(e,t),o&&o.removeChild(n)}},n.prototype.moveTo=function(e,t){if(e.parent==this){var o=this.childs.indexOf(e);o<t&&t++}var n=this.childs[t]||this.append;this.moveBefore(e,n)},n.prototype.insertBefore=function(e,t){if(this._hasChilds()){if(t==this.append)e.setParent(this),e.fieldEditable='object'==this.type,this.childs.push(e);else{var o=this.childs.indexOf(t);if(-1==o)throw new Error('Node not found');e.setParent(this),e.fieldEditable='object'==this.type,this.childs.splice(o,0,e)}if(this.expanded){var n=e.getDom(),r=t.getDom(),i=r?r.parentNode:void 0;r&&i&&i.insertBefore(n,r),e.showChilds()}this.updateDom({updateIndexes:!0}),e.updateDom({recurse:!0})}},n.prototype.insertAfter=function(e,t){if(this._hasChilds()){var o=this.childs.indexOf(t),n=this.childs[o+1];n?this.insertBefore(e,n):this.appendChild(e)}},n.prototype.search=function(e){var t=[],o=e?e.toLowerCase():void 0,n;if(delete this.searchField,delete this.searchValue,void 0!=this.field){var r=(this.field+'').toLowerCase();n=r.indexOf(o),-1!=n&&(this.searchField=!0,t.push({node:this,elem:'field'})),this._updateDomField()}if(this._hasChilds()){if(this.childs){var i=[];this.childs.forEach(function(t){i=i.concat(t.search(e))}),t=t.concat(i)}if(void 0!=o){var a=!1;0==i.length?this.collapse(a):this.expand(a)}}else{if(void 0!=this.value){var s=(this.value+'').toLowerCase();n=s.indexOf(o),-1!=n&&(this.searchValue=!0,t.push({node:this,elem:'value'}))}this._updateDomValue()}return t},n.prototype.scrollTo=function(e){if(!this.dom.tr||!this.dom.tr.parentNode)for(var t=this.parent;t;)t.expand(!1),t=t.parent;this.dom.tr&&this.dom.tr.parentNode&&this.editor.scrollTo(this.dom.tr.offsetTop,e)},n.focusElement=void 0,n.prototype.focus=function(e){if(n.focusElement=e,this.dom.tr&&this.dom.tr.parentNode){var t=this.dom;switch(e){case'drag':t.drag?t.drag.focus():t.menu.focus();break;case'menu':t.menu.focus();break;case'expand':this._hasChilds()?t.expand.focus():t.field&&this.fieldEditable?(t.field.focus(),s.selectContentEditable(t.field)):t.value&&!this._hasChilds()?(t.value.focus(),s.selectContentEditable(t.value)):t.menu.focus();break;case'field':t.field&&this.fieldEditable?(t.field.focus(),s.selectContentEditable(t.field)):t.value&&!this._hasChilds()?(t.value.focus(),s.selectContentEditable(t.value)):this._hasChilds()?t.expand.focus():t.menu.focus();break;case'value':default:t.value&&!this._hasChilds()?(t.value.focus(),s.selectContentEditable(t.value)):t.field&&this.fieldEditable?(t.field.focus(),s.selectContentEditable(t.field)):this._hasChilds()?t.expand.focus():t.menu.focus();}}},n.select=function(e){setTimeout(function(){s.selectContentEditable(e)},0)},n.prototype.blur=function(){this._getDomValue(!1),this._getDomField(!1)},n.prototype.containsNode=function(e){if(this==e)return!0;var t=this.childs;if(t)for(var o=0,n=t.length;o<n;o++)if(t[o].containsNode(e))return!0;return!1},n.prototype._move=function(e,t){if(e!=t){if(e.containsNode(this))throw new Error('Cannot move a field into a child of itself');e.parent&&e.parent.removeChild(e);var o=e.clone();e.clearDom(),t?this.insertBefore(o,t):this.appendChild(o)}},n.prototype.removeChild=function(e){if(this.childs){var t=this.childs.indexOf(e);if(-1!=t){e.hide(),delete e.searchField,delete e.searchValue;var o=this.childs.splice(t,1)[0];return o.parent=null,this.updateDom({updateIndexes:!0}),o}}},n.prototype._remove=function(e){this.removeChild(e)},n.prototype.changeType=function(e){var t=this.type;if(t!=e){if(('string'==e||'auto'==e)&&('string'==t||'auto'==t))this.type=e;else{var o=this.dom.tr?this.dom.tr.parentNode:void 0,n;n=this.expanded?this.getAppend():this.getDom();var r=n&&n.parentNode?n.nextSibling:void 0;this.hide(),this.clearDom(),this.type=e,'object'==e?(!this.childs&&(this.childs=[]),this.childs.forEach(function(e){e.clearDom(),delete e.index,e.fieldEditable=!0,void 0==e.field&&(e.field='')}),('string'==t||'auto'==t)&&(this.expanded=!0)):'array'==e?(!this.childs&&(this.childs=[]),this.childs.forEach(function(e,t){e.clearDom(),e.fieldEditable=!1,e.index=t}),('string'==t||'auto'==t)&&(this.expanded=!0)):this.expanded=!1,o&&(r?o.insertBefore(this.getDom(),r):o.appendChild(this.getDom())),this.showChilds()}('auto'==e||'string'==e)&&(this.value='string'==e?this.value+'':this._stringCast(this.value+''),this.focus()),this.updateDom({updateIndexes:!0})}},n.prototype._getDomValue=function(e){if(this.dom.value&&'array'!=this.type&&'object'!=this.type&&(this.valueInnerText=s.getInnerText(this.dom.value)),void 0!=this.valueInnerText)try{var t;if('string'==this.type)t=this._unescapeHTML(this.valueInnerText);else{var o=this._unescapeHTML(this.valueInnerText);t=this._stringCast(o)}t!==this.value&&(this.value=t,this._debouncedOnChangeValue())}catch(t){if(this.value=void 0,!0!==e)throw t}},n.prototype._onChangeValue=function(){var e=this.editor.getSelection();if(e.range){var t=s.textDiff(this.value+'',this.previousValue+'');e.range.startOffset=t.start,e.range.endOffset=t.end}var o=this.editor.getSelection();if(o.range){var n=s.textDiff(this.previousValue+'',this.value+'');o.range.startOffset=n.start,o.range.endOffset=n.end}this.editor._onAction('editValue',{node:this,oldValue:this.previousValue,newValue:this.value,oldSelection:e,newSelection:o}),this.previousValue=this.value},n.prototype._onChangeField=function(){var e=this.editor.getSelection();if(e.range){var t=s.textDiff(this.field,this.previousField);e.range.startOffset=t.start,e.range.endOffset=t.end}var o=this.editor.getSelection();if(o.range){var n=s.textDiff(this.previousField,this.field);o.range.startOffset=n.start,o.range.endOffset=n.end}this.editor._onAction('editField',{node:this,oldValue:this.previousField,newValue:this.field,oldSelection:e,newSelection:o}),this.previousField=this.field},n.prototype._updateDomValue=function(){var e=this.dom.value;if(e){var t=['jsoneditor-value'],o=this.value,n='auto'==this.type?s.type(o):this.type,r='string'==n&&s.isUrl(o);t.push('jsoneditor-'+n),r&&t.push('jsoneditor-url');var a=''==this.value+''&&'array'!=this.type&&'object'!=this.type;if(a&&t.push('jsoneditor-empty'),this.searchValueActive&&t.push('jsoneditor-highlight-active'),this.searchValue&&t.push('jsoneditor-highlight'),e.className=t.join(' '),'array'==n||'object'==n){var l=this.childs?this.childs.length:0;e.title=this.type+' containing '+l+' items'}else e.title=r&&this.editable.value?'Ctrl+Click or Ctrl+Enter to open url in new window':'';if('boolean'===n&&this.editable.value?(!this.dom.checkbox&&(this.dom.checkbox=document.createElement('input'),this.dom.checkbox.type='checkbox',this.dom.tdCheckbox=document.createElement('td'),this.dom.tdCheckbox.className='jsoneditor-tree',this.dom.tdCheckbox.appendChild(this.dom.checkbox),this.dom.tdValue.parentNode.insertBefore(this.dom.tdCheckbox,this.dom.tdValue)),this.dom.checkbox.checked=this.value):this.dom.tdCheckbox&&(this.dom.tdCheckbox.parentNode.removeChild(this.dom.tdCheckbox),delete this.dom.tdCheckbox,delete this.dom.checkbox),this.enum&&this.editable.value){if(!this.dom.select){this.dom.select=document.createElement('select'),this.id=this.field+'_'+new Date().getUTCMilliseconds(),this.dom.select.id=this.id,this.dom.select.name=this.dom.select.id,this.dom.select.option=document.createElement('option'),this.dom.select.option.value='',this.dom.select.option.innerHTML='--',this.dom.select.appendChild(this.dom.select.option);for(var d=0;d<this.enum.length;d++)this.dom.select.option=document.createElement('option'),this.dom.select.option.value=this.enum[d],this.dom.select.option.innerHTML=this.enum[d],this.dom.select.option.value==this.value&&(this.dom.select.option.selected=!0),this.dom.select.appendChild(this.dom.select.option);this.dom.tdSelect=document.createElement('td'),this.dom.tdSelect.className='jsoneditor-tree',this.dom.tdSelect.appendChild(this.dom.select),this.dom.tdValue.parentNode.insertBefore(this.dom.tdSelect,this.dom.tdValue)}!this.schema||this.schema.hasOwnProperty('oneOf')||this.schema.hasOwnProperty('anyOf')||this.schema.hasOwnProperty('allOf')?delete this.valueFieldHTML:(this.valueFieldHTML=this.dom.tdValue.innerHTML,this.dom.tdValue.style.visibility='hidden',this.dom.tdValue.innerHTML='')}else this.dom.tdSelect&&(this.dom.tdSelect.parentNode.removeChild(this.dom.tdSelect),delete this.dom.tdSelect,delete this.dom.select,this.dom.tdValue.innerHTML=this.valueFieldHTML,this.dom.tdValue.style.visibility='',delete this.valueFieldHTML);s.stripFormatting(e)}},n.prototype._updateDomField=function(){var e=this.dom.field;if(e){var t=''==this.field+''&&'array'!=this.parent.type;t?s.addClassName(e,'jsoneditor-empty'):s.removeClassName(e,'jsoneditor-empty'),this.searchFieldActive?s.addClassName(e,'jsoneditor-highlight-active'):s.removeClassName(e,'jsoneditor-highlight-active'),this.searchField?s.addClassName(e,'jsoneditor-highlight'):s.removeClassName(e,'jsoneditor-highlight'),s.stripFormatting(e)}},n.prototype._getDomField=function(e){if(this.dom.field&&this.fieldEditable&&(this.fieldInnerText=s.getInnerText(this.dom.field)),void 0!=this.fieldInnerText)try{var t=this._unescapeHTML(this.fieldInnerText);t!==this.field&&(this.field=t,this._debouncedOnChangeField())}catch(t){if(this.field=void 0,!0!==e)throw t}},n.prototype.validate=function(){var t=[];if('object'===this.type){for(var o={},n=[],r=0,i;r<this.childs.length;r++)i=this.childs[r],o.hasOwnProperty(i.field)&&n.push(i.field),o[i.field]=!0;0<n.length&&(t=this.childs.filter(function(e){return-1!==n.indexOf(e.field)}).map(function(e){return{node:e,error:{message:'duplicate key "'+e.field+'"'}}}))}if(this.childs)for(var r=0,a;r<this.childs.length;r++)a=this.childs[r].validate(),0<a.length&&(t=t.concat(a));return t},n.prototype.clearDom=function(){this.dom={}},n.prototype.getDom=function(){var e=this.dom;if(e.tr)return e.tr;if(this._updateEditability(),e.tr=document.createElement('tr'),e.tr.node=this,'tree'===this.editor.options.mode){var t=document.createElement('td');if(this.editable.field&&this.parent){var o=document.createElement('button');o.type='button',e.drag=o,o.className='jsoneditor-dragarea',o.title='Drag to move this field (Alt+Shift+Arrows)',t.appendChild(o)}e.tr.appendChild(t);var n=document.createElement('td'),r=document.createElement('button');r.type='button',e.menu=r,r.className='jsoneditor-contextmenu',r.title='Click to open the actions menu (Ctrl+M)',n.appendChild(e.menu),e.tr.appendChild(n)}var i=document.createElement('td');return e.tr.appendChild(i),e.tree=this._createDomTree(),i.appendChild(e.tree),this.updateDom({updateIndexes:!0}),e.tr},n.onDragStart=function(e,t){if(!Array.isArray(e))return n.onDragStart([e],t);if(0!==e.length){var o=e[0],r=e[e.length-1],i=n.getNodeFromTarget(t.target),a=r._nextSibling(),l=o.editor,d=s.getAbsoluteTop(i.dom.tr)-s.getAbsoluteTop(o.dom.tr);l.mousemove||(l.mousemove=s.addEventListener(window,'mousemove',function(t){n.onDrag(e,t)})),l.mouseup||(l.mouseup=s.addEventListener(window,'mouseup',function(t){n.onDragEnd(e,t)})),l.highlighter.lock(),l.drag={oldCursor:document.body.style.cursor,oldSelection:l.getSelection(),oldBeforeNode:a,mouseX:t.pageX,offsetY:d,level:o.getLevel()},document.body.style.cursor='move',t.preventDefault()}},n.onDrag=function(e,t){if(!Array.isArray(e))return n.onDrag([e],t);if(0!==e.length){var o=e[0].editor,r=t.pageY-o.drag.offsetY,i=t.pageX,a=!1,d=e[0],c,p,u,h,m,g,f,y,b,v,x,w,_,E;if(c=d.dom.tr,b=s.getAbsoluteTop(c),w=c.offsetHeight,r<b){p=c;do p=p.previousSibling,f=n.getNodeFromTarget(p),v=p?s.getAbsoluteTop(p):0;while(p&&r<v);f&&!f.parent&&(f=void 0),f||(g=c.parentNode.firstChild,p=g?g.nextSibling:void 0,f=n.getNodeFromTarget(p),f==d&&(f=void 0)),f&&(p=f.dom.tr,v=p?s.getAbsoluteTop(p):0,r>v+w&&(f=void 0)),f&&(e.forEach(function(e){f.parent.moveBefore(e,f)}),a=!0)}else{var C=e[e.length-1];if(m=C.expanded&&C.append?C.append.getDom():C.dom.tr,h=m?m.nextSibling:void 0,h){x=s.getAbsoluteTop(h),u=h;do y=n.getNodeFromTarget(u),u&&(_=u.nextSibling?s.getAbsoluteTop(u.nextSibling):0,E=u?_-x:0,y.parent.childs.length==e.length&&y.parent.childs[e.length-1]==C&&(b+=27)),u=u.nextSibling;while(u&&r>b+E);if(y&&y.parent){var j=i-o.drag.mouseX,S=Math.round(j/24/2),N=o.drag.level+S,k=y.getLevel();for(p=y.dom.tr.previousSibling;k<N&&p;){f=n.getNodeFromTarget(p);var A=e.some(function(e){return e===f||f._isChildOf(e)});if(A);else if(f instanceof l){var O=f.parent.childs;if(O.length!=e.length||O[e.length-1]!=C)y=n.getNodeFromTarget(p),k=y.getLevel();else break}else break;p=p.previousSibling}m.nextSibling!=y.dom.tr&&(e.forEach(function(e){y.parent.moveBefore(e,y)}),a=!0)}}}a&&(o.drag.mouseX=i,o.drag.level=d.getLevel()),o.startAutoScroll(r),t.preventDefault()}},n.onDragEnd=function(e,t){if(!Array.isArray(e))return n.onDrag([e],t);if(0!==e.length){var o=e[0],r=o.editor,i=o.parent,a=i.childs.indexOf(o),l=i.childs[a+e.length]||i.append;e[0]&&e[0].dom.menu.focus();var d={nodes:e,oldSelection:r.drag.oldSelection,newSelection:r.getSelection(),oldBeforeNode:r.drag.oldBeforeNode,newBeforeNode:l};d.oldBeforeNode!=d.newBeforeNode&&r._onAction('moveNodes',d),document.body.style.cursor=r.drag.oldCursor,r.highlighter.unlock(),e.forEach(function(e){t.target!==e.dom.drag&&t.target!==e.dom.menu&&r.highlighter.unhighlight()}),delete r.drag,r.mousemove&&(s.removeEventListener(window,'mousemove',r.mousemove),delete r.mousemove),r.mouseup&&(s.removeEventListener(window,'mouseup',r.mouseup),delete r.mouseup),r.stopAutoScroll(),t.preventDefault()}},n.prototype._isChildOf=function(e){for(var t=this.parent;t;){if(t==e)return!0;t=t.parent}return!1},n.prototype._createDomField=function(){return document.createElement('div')},n.prototype.setHighlight=function(e){this.dom.tr&&(e?s.addClassName(this.dom.tr,'jsoneditor-highlight'):s.removeClassName(this.dom.tr,'jsoneditor-highlight'),this.append&&this.append.setHighlight(e),this.childs&&this.childs.forEach(function(t){t.setHighlight(e)}))},n.prototype.setSelected=function(e,t){this.selected=e,this.dom.tr&&(e?s.addClassName(this.dom.tr,'jsoneditor-selected'):s.removeClassName(this.dom.tr,'jsoneditor-selected'),t?s.addClassName(this.dom.tr,'jsoneditor-first'):s.removeClassName(this.dom.tr,'jsoneditor-first'),this.append&&this.append.setSelected(e),this.childs&&this.childs.forEach(function(t){t.setSelected(e)}))},n.prototype.updateValue=function(e){this.value=e,this.updateDom()},n.prototype.updateField=function(e){this.field=e,this.updateDom()},n.prototype.updateDom=function(e){var t=this.dom.tree;t&&(t.style.marginLeft=24*this.getLevel()+'px');var o=this.dom.field;if(o){this.fieldEditable?(o.contentEditable=this.editable.field,o.spellcheck=!1,o.className='jsoneditor-field'):o.className='jsoneditor-readonly';var n;n=void 0==this.index?void 0==this.field?this._hasChilds()?this.type:'':this.field:this.index,o.innerHTML=this._escapeHTML(n),this._updateSchema()}var r=this.dom.value;if(r){var i=this.childs?this.childs.length:0;'array'==this.type?(r.innerHTML='['+i+']',s.addClassName(this.dom.tr,'jsoneditor-expandable')):'object'==this.type?(r.innerHTML='{'+i+'}',s.addClassName(this.dom.tr,'jsoneditor-expandable')):(r.innerHTML=this._escapeHTML(this.value),s.removeClassName(this.dom.tr,'jsoneditor-expandable'))}this._updateDomField(),this._updateDomValue(),e&&!0===e.updateIndexes&&this._updateDomIndexes(),e&&!0===e.recurse&&this.childs&&this.childs.forEach(function(t){t.updateDom(e)}),this.append&&this.append.updateDom()},n.prototype._updateSchema=function(){this.editor&&this.editor.options&&(this.schema=n._findSchema(this.editor.options.schema,this.getPath()),this.schema?this.enum=n._findEnum(this.schema):delete this.enum)},n._findEnum=function(e){if(e.enum)return e.enum;var t=e.oneOf||e.anyOf||e.allOf;if(t){var o=t.filter(function(e){return e.enum});if(0<o.length)return o[0].enum}return null},n._findSchema=function(e,t){for(var o=e,n=0,r;n<t.length&&o;n++)r=t[n],'string'===typeof r&&o.properties?o=o.properties[r]||null:'number'===typeof r&&o.items&&(o=o.items);return o},n.prototype._updateDomIndexes=function(){var e=this.dom.value,t=this.childs;e&&t&&('array'==this.type?t.forEach(function(e,t){e.index=t;var o=e.dom.field;o&&(o.innerHTML=t)}):'object'==this.type&&t.forEach(function(e){e.index!=void 0&&(delete e.index,e.field==void 0&&(e.field=''))}))},n.prototype._createDomValue=function(){var e;return'array'==this.type?(e=document.createElement('div'),e.innerHTML='[...]'):'object'==this.type?(e=document.createElement('div'),e.innerHTML='{...}'):!this.editable.value&&s.isUrl(this.value)?(e=document.createElement('a'),e.href=this.value,e.target='_blank',e.innerHTML=this._escapeHTML(this.value)):(e=document.createElement('div'),e.contentEditable=this.editable.value,e.spellcheck=!1,e.innerHTML=this._escapeHTML(this.value)),e},n.prototype._createDomExpandButton=function(){var e=document.createElement('button');return e.type='button',this._hasChilds()?(e.className=this.expanded?'jsoneditor-expanded':'jsoneditor-collapsed',e.title='Click to expand/collapse this field (Ctrl+E). \nCtrl+Click to expand/collapse including all childs.'):(e.className='jsoneditor-invisible',e.title=''),e},n.prototype._createDomTree=function(){var e=this.dom,t=document.createElement('table'),o=document.createElement('tbody');t.style.borderCollapse='collapse',t.className='jsoneditor-values',t.appendChild(o);var n=document.createElement('tr');o.appendChild(n);var r=document.createElement('td');r.className='jsoneditor-tree',n.appendChild(r),e.expand=this._createDomExpandButton(),r.appendChild(e.expand),e.tdExpand=r;var i=document.createElement('td');i.className='jsoneditor-tree',n.appendChild(i),e.field=this._createDomField(),i.appendChild(e.field),e.tdField=i;var a=document.createElement('td');a.className='jsoneditor-tree',n.appendChild(a),'object'!=this.type&&'array'!=this.type&&(a.appendChild(document.createTextNode(':')),a.className='jsoneditor-separator'),e.tdSeparator=a;var s=document.createElement('td');return s.className='jsoneditor-tree',n.appendChild(s),e.value=this._createDomValue(),s.appendChild(e.value),e.tdValue=s,t},n.prototype.onEvent=function(e){var t=e.type,o=e.target||e.srcElement,n=this.dom,r=this,i=this._hasChilds();if((o==n.drag||o==n.menu)&&('mouseover'==t?this.editor.highlighter.highlight(this):'mouseout'==t&&this.editor.highlighter.unhighlight()),'click'==t&&o==n.menu){var a=r.editor.highlighter;a.highlight(r),a.lock(),s.addClassName(n.menu,'jsoneditor-selected'),this.showContextMenu(n.menu,function(){s.removeClassName(n.menu,'jsoneditor-selected'),a.unlock(),a.unhighlight()})}if('click'==t&&(o==n.expand||('view'===r.editor.options.mode||'form'===r.editor.options.mode)&&'DIV'===o.nodeName)&&i){var l=e.ctrlKey;this._onExpand(l)}'change'==t&&o==n.checkbox&&(this.dom.value.innerHTML=!this.value,this._getDomValue()),'change'==t&&o==n.select&&(this.dom.value.innerHTML=n.select.value,this._getDomValue(),this._updateDomValue());var d=n.value;o==d&&('blur'===t||'change'===t?(this._getDomValue(!0),this._updateDomValue(),this.value&&(d.innerHTML=this._escapeHTML(this.value))):'input'===t?(this._getDomValue(!0),this._updateDomValue()):'keydown'===t||'mousedown'===t?this.editor.selection=this.editor.getSelection():'click'===t?(e.ctrlKey||!this.editable.value)&&s.isUrl(this.value)&&window.open(this.value,'_blank'):'keyup'===t?(this._getDomValue(!0),this._updateDomValue()):'cut'===t||'paste'===t?setTimeout(function(){r._getDomValue(!0),r._updateDomValue()},1):void 0);var c=n.field;o==c&&('blur'===t||'change'===t?(this._getDomField(!0),this._updateDomField(),this.field&&(c.innerHTML=this._escapeHTML(this.field))):'input'===t?(this._getDomField(!0),this._updateSchema(),this._updateDomField(),this._updateDomValue()):'keydown'===t||'mousedown'===t?this.editor.selection=this.editor.getSelection():'keyup'===t?(this._getDomField(!0),this._updateDomField()):'cut'===t||'paste'===t?setTimeout(function(){r._getDomField(!0),r._updateDomField()},1):void 0);var p=n.tree;if(o==p.parentNode&&'click'==t&&!e.hasMoved){var u=void 0==e.offsetX?e.pageX<s.getAbsoluteLeft(n.tdSeparator):e.offsetX<24*(this.getLevel()+1);u||i?c&&(s.setEndOfContentEditable(c),c.focus()):d&&!this.enum&&(s.setEndOfContentEditable(d),d.focus())}(o!=n.tdExpand||i)&&o!=n.tdField&&o!=n.tdSeparator||'click'!=t||e.hasMoved||!c||(s.setEndOfContentEditable(c),c.focus()),'keydown'==t&&this.onKeyDown(e)},n.prototype.onKeyDown=function(e){var t=e.which||e.keyCode,o=e.target||e.srcElement,r=e.ctrlKey,i=e.shiftKey,a=e.altKey,d=!1,c='tree'===this.editor.options.mode,p=0<this.editor.multiselection.nodes.length?this.editor.multiselection.nodes:[this],u=p[0],h=p[p.length-1],m,g,f,y,b,v,x,w;if(13==t){if(o==this.dom.value)(!this.editable.value||e.ctrlKey)&&s.isUrl(this.value)&&(window.open(this.value,'_blank'),d=!0);else if(o==this.dom.expand){var _=this._hasChilds();if(_){var E=e.ctrlKey;this._onExpand(E),o.focus(),d=!0}}}else if(68==t)r&&c&&(n.onDuplicate(p),d=!0);else if(69==t)r&&(this._onExpand(i),o.focus(),d=!0);else if(77==t&&c)r&&(this.showContextMenu(o),d=!0);else if(46==t&&c)r&&(n.onRemove(p),d=!0);else if(45==t&&c)r&&!i?(this._onInsertBefore(),d=!0):r&&i&&(this._onInsertAfter(),d=!0);else if(35==t){if(a){var C=this._lastNode();C&&C.focus(n.focusElement||this._getElementName(o)),d=!0}}else if(36==t){if(a){var j=this._firstNode();j&&j.focus(n.focusElement||this._getElementName(o)),d=!0}}else if(37==t){if(a&&!i){var S=this._previousElement(o);S&&this.focus(this._getElementName(S)),d=!0}else if(a&&i&&c){if(h.expanded){var N=h.getAppend();f=N?N.nextSibling:void 0}else{var k=h.getDom();f=k.nextSibling}f&&(g=n.getNodeFromTarget(f),y=f.nextSibling,T=n.getNodeFromTarget(y),g&&g instanceof l&&1!=h.parent.childs.length&&T&&T.parent&&(b=this.editor.getSelection(),v=h._nextSibling(),p.forEach(function(e){T.parent.moveBefore(e,T)}),this.focus(n.focusElement||this._getElementName(o)),this.editor._onAction('moveNodes',{nodes:p,oldBeforeNode:v,newBeforeNode:T,oldSelection:b,newSelection:this.editor.getSelection()})))}}else if(38==t)a&&!i?(m=this._previousNode(),m&&(this.editor.deselect(!0),m.focus(n.focusElement||this._getElementName(o))),d=!0):!a&&r&&i&&c?(m=this._previousNode(),m&&(w=this.editor.multiselection,w.start=w.start||this,w.end=m,x=this.editor._findTopLevelNodes(w.start,w.end),this.editor.select(x),m.focus('field')),d=!0):a&&i&&c&&(m=u._previousNode(),m&&m.parent&&(b=this.editor.getSelection(),v=h._nextSibling(),p.forEach(function(e){m.parent.moveBefore(e,m)}),this.focus(n.focusElement||this._getElementName(o)),this.editor._onAction('moveNodes',{nodes:p,oldBeforeNode:v,newBeforeNode:m,oldSelection:b,newSelection:this.editor.getSelection()})),d=!0);else if(39==t){if(a&&!i){var A=this._nextElement(o);A&&this.focus(this._getElementName(A)),d=!0}else if(a&&i&&c){k=u.getDom();var O=k.previousSibling;O&&(m=n.getNodeFromTarget(O),m&&m.parent&&m instanceof l&&!m.isVisible()&&(b=this.editor.getSelection(),v=h._nextSibling(),p.forEach(function(e){m.parent.moveBefore(e,m)}),this.focus(n.focusElement||this._getElementName(o)),this.editor._onAction('moveNodes',{nodes:p,oldBeforeNode:v,newBeforeNode:m,oldSelection:b,newSelection:this.editor.getSelection()})))}}else if(40==t)if(a&&!i)g=this._nextNode(),g&&(this.editor.deselect(!0),g.focus(n.focusElement||this._getElementName(o))),d=!0;else if(!a&&r&&i&&c)g=this._nextNode(),g&&(w=this.editor.multiselection,w.start=w.start||this,w.end=g,x=this.editor._findTopLevelNodes(w.start,w.end),this.editor.select(x),g.focus('field')),d=!0;else if(a&&i&&c){g=h.expanded?h.append?h.append._nextNode():void 0:h._nextNode();var T=g&&(g._nextNode()||g.parent.append);T&&T.parent&&(b=this.editor.getSelection(),v=h._nextSibling(),p.forEach(function(e){T.parent.moveBefore(e,T)}),this.focus(n.focusElement||this._getElementName(o)),this.editor._onAction('moveNodes',{nodes:p,oldBeforeNode:v,newBeforeNode:T,oldSelection:b,newSelection:this.editor.getSelection()})),d=!0}d&&(e.preventDefault(),e.stopPropagation())},n.prototype._onExpand=function(e){if(e){var t=this.dom.tr.parentNode,o=t.parentNode,n=o.scrollTop;o.removeChild(t)}this.expanded?this.collapse(e):this.expand(e),e&&(o.appendChild(t),o.scrollTop=n)},n.onRemove=function(e){if(!Array.isArray(e))return n.onRemove([e]);if(e&&0<e.length){var t=e[0],o=t.parent,r=t.editor,i=t.getIndex();r.highlighter.unhighlight();var a=r.getSelection();n.blurNodes(e);var s=r.getSelection();e.forEach(function(e){e.parent._remove(e)}),r._onAction('removeNodes',{nodes:e.slice(0),parent:o,index:i,oldSelection:a,newSelection:s})}},n.onDuplicate=function(e){if(!Array.isArray(e))return n.onDuplicate([e]);if(e&&0<e.length){var t=e[e.length-1],o=t.parent,r=t.editor;r.deselect(r.multiselection.nodes);var i=r.getSelection(),a=t,s=e.map(function(e){var t=e.clone();return o.insertAfter(t,a),a=t,t});1===e.length?s[0].focus():r.select(s);var l=r.getSelection();r._onAction('duplicateNodes',{afterNode:t,nodes:s,parent:o,oldSelection:i,newSelection:l})}},n.prototype._onInsertBefore=function(e,t,o){var r=this.editor.getSelection(),i=new n(this.editor,{field:e==void 0?'':e,value:t==void 0?'':t,type:o});i.expand(!0),this.parent.insertBefore(i,this),this.editor.highlighter.unhighlight(),i.focus('field');var a=this.editor.getSelection();this.editor._onAction('insertBeforeNodes',{nodes:[i],beforeNode:this,parent:this.parent,oldSelection:r,newSelection:a})},n.prototype._onInsertAfter=function(e,t,o){var r=this.editor.getSelection(),i=new n(this.editor,{field:e==void 0?'':e,value:t==void 0?'':t,type:o});i.expand(!0),this.parent.insertAfter(i,this),this.editor.highlighter.unhighlight(),i.focus('field');var a=this.editor.getSelection();this.editor._onAction('insertAfterNodes',{nodes:[i],afterNode:this,parent:this.parent,oldSelection:r,newSelection:a})},n.prototype._onAppend=function(e,t,o){var r=this.editor.getSelection(),i=new n(this.editor,{field:e==void 0?'':e,value:t==void 0?'':t,type:o});i.expand(!0),this.parent.appendChild(i),this.editor.highlighter.unhighlight(),i.focus('field');var a=this.editor.getSelection();this.editor._onAction('appendNodes',{nodes:[i],parent:this.parent,oldSelection:r,newSelection:a})},n.prototype._onChangeType=function(e){var t=this.type;if(e!=t){var o=this.editor.getSelection();this.changeType(e);var n=this.editor.getSelection();this.editor._onAction('changeType',{node:this,oldType:t,newType:e,oldSelection:o,newSelection:n})}},n.prototype.sort=function(e){if(this._hasChilds()){var t='desc'==e?-1:1,o='array'==this.type?'value':'field';this.hideChilds();var n=this.childs,i=this.sortOrder;this.childs=this.childs.concat(),this.childs.sort(function(e,n){return t*r(e[o],n[o])}),this.sortOrder=1==t?'asc':'desc',this.editor._onAction('sort',{node:this,oldChilds:n,oldSort:i,newChilds:this.childs,newSort:this.sortOrder}),this.showChilds()}},n.prototype.getAppend=function(){return this.append||(this.append=new l(this.editor),this.append.setParent(this)),this.append.getDom()},n.getNodeFromTarget=function(e){for(;e;){if(e.node)return e.node;e=e.parentNode}},n.blurNodes=function(e){if(!Array.isArray(e))return void n.blurNodes([e]);var t=e[0],o=t.parent,r=t.getIndex();o.childs[r+e.length]?o.childs[r+e.length].focus():o.childs[r-1]?o.childs[r-1].focus():o.focus()},n.prototype._nextSibling=function(){var e=this.parent.childs.indexOf(this);return this.parent.childs[e+1]||this.parent.append},n.prototype._previousNode=function(){var e=null,t=this.getDom();if(t&&t.parentNode){var o=t;do o=o.previousSibling,e=n.getNodeFromTarget(o);while(o&&e instanceof l&&!e.isVisible())}return e},n.prototype._nextNode=function(){var e=null,t=this.getDom();if(t&&t.parentNode){var o=t;do o=o.nextSibling,e=n.getNodeFromTarget(o);while(o&&e instanceof l&&!e.isVisible())}return e},n.prototype._firstNode=function(){var e=null,t=this.getDom();if(t&&t.parentNode){var o=t.parentNode.firstChild;e=n.getNodeFromTarget(o)}return e},n.prototype._lastNode=function(){var e=null,t=this.getDom();if(t&&t.parentNode){var o=t.parentNode.lastChild;for(e=n.getNodeFromTarget(o);o&&e instanceof l&&!e.isVisible();)o=o.previousSibling,e=n.getNodeFromTarget(o)}return e},n.prototype._previousElement=function(e){var t=this.dom;switch(e){case t.value:if(this.fieldEditable)return t.field;case t.field:if(this._hasChilds())return t.expand;case t.expand:return t.menu;case t.menu:if(t.drag)return t.drag;default:return null;}},n.prototype._nextElement=function(e){var t=this.dom;switch(e){case t.drag:return t.menu;case t.menu:if(this._hasChilds())return t.expand;case t.expand:if(this.fieldEditable)return t.field;case t.field:if(!this._hasChilds())return t.value;default:return null;}},n.prototype._getElementName=function(e){var t=this.dom;for(var o in t)if(t.hasOwnProperty(o)&&t[o]==e)return o;return null},n.prototype._hasChilds=function(){return'array'==this.type||'object'==this.type},n.TYPE_TITLES={auto:'Field type "auto". The field type is automatically determined from the value and can be a string, number, boolean, or null.',object:'Field type "object". An object contains an unordered set of key/value pairs.',array:'Field type "array". An array contains an ordered collection of values.',string:'Field type "string". Field type is not determined from the value, but always returned as string.'},n.prototype.showContextMenu=function(e,t){var o=this,r=n.TYPE_TITLES,a=[];if(this.editable.value&&a.push({text:'Type',title:'Change the type of this field',className:'jsoneditor-type-'+this.type,submenu:[{text:'Auto',className:'jsoneditor-type-auto'+('auto'==this.type?' jsoneditor-selected':''),title:r.auto,click:function(){o._onChangeType('auto')}},{text:'Array',className:'jsoneditor-type-array'+('array'==this.type?' jsoneditor-selected':''),title:r.array,click:function(){o._onChangeType('array')}},{text:'Object',className:'jsoneditor-type-object'+('object'==this.type?' jsoneditor-selected':''),title:r.object,click:function(){o._onChangeType('object')}},{text:'String',className:'jsoneditor-type-string'+('string'==this.type?' jsoneditor-selected':''),title:r.string,click:function(){o._onChangeType('string')}}]}),this._hasChilds()){var s='asc'==this.sortOrder?'desc':'asc';a.push({text:'Sort',title:'Sort the childs of this '+this.type,className:'jsoneditor-sort-'+s,click:function(){o.sort(s)},submenu:[{text:'Ascending',className:'jsoneditor-sort-asc',title:'Sort the childs of this '+this.type+' in ascending order',click:function(){o.sort('asc')}},{text:'Descending',className:'jsoneditor-sort-desc',title:'Sort the childs of this '+this.type+' in descending order',click:function(){o.sort('desc')}}]})}if(this.parent&&this.parent._hasChilds()){a.length&&a.push({type:'separator'});var l=o.parent.childs;o==l[l.length-1]&&a.push({text:'Append',title:'Append a new field with type \'auto\' after this field (Ctrl+Shift+Ins)',submenuTitle:'Select the type of the field to be appended',className:'jsoneditor-append',click:function(){o._onAppend('','','auto')},submenu:[{text:'Auto',className:'jsoneditor-type-auto',title:r.auto,click:function(){o._onAppend('','','auto')}},{text:'Array',className:'jsoneditor-type-array',title:r.array,click:function(){o._onAppend('',[])}},{text:'Object',className:'jsoneditor-type-object',title:r.object,click:function(){o._onAppend('',{})}},{text:'String',className:'jsoneditor-type-string',title:r.string,click:function(){o._onAppend('','','string')}}]}),a.push({text:'Insert',title:'Insert a new field with type \'auto\' before this field (Ctrl+Ins)',submenuTitle:'Select the type of the field to be inserted',className:'jsoneditor-insert',click:function(){o._onInsertBefore('','','auto')},submenu:[{text:'Auto',className:'jsoneditor-type-auto',title:r.auto,click:function(){o._onInsertBefore('','','auto')}},{text:'Array',className:'jsoneditor-type-array',title:r.array,click:function(){o._onInsertBefore('',[])}},{text:'Object',className:'jsoneditor-type-object',title:r.object,click:function(){o._onInsertBefore('',{})}},{text:'String',className:'jsoneditor-type-string',title:r.string,click:function(){o._onInsertBefore('','','string')}}]}),this.editable.field&&(a.push({text:'Duplicate',title:'Duplicate this field (Ctrl+D)',className:'jsoneditor-duplicate',click:function(){n.onDuplicate(o)}}),a.push({text:'Remove',title:'Remove this field (Ctrl+Del)',className:'jsoneditor-remove',click:function(){n.onRemove(o)}}))}var d=new i(a,{close:t});d.show(e,this.editor.content)},n.prototype._getType=function(e){return e instanceof Array?'array':e instanceof Object?'object':'string'==typeof e&&'string'!=typeof this._stringCast(e)?'string':'auto'},n.prototype._stringCast=function(e){var t=e.toLowerCase(),o=+e,n=parseFloat(e);return''==e?'':'null'==t?null:'true'==t||'false'!=t&&(isNaN(o)||isNaN(n)?e:o)},n.prototype._escapeHTML=function(e){if('string'!==typeof e)return e+'';var t=(e+'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/  /g,' &nbsp;').replace(/^ /,'&nbsp;').replace(/ $/,'&nbsp;'),o=JSON.stringify(t),n=o.substring(1,o.length-1);return!0===this.editor.options.escapeUnicode&&(n=s.escapeUnicodeChars(n)),n},n.prototype._unescapeHTML=function(e){var t='"'+this._escapeJSON(e)+'"',o=s.parse(t);return o.replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&nbsp;|\u00A0/g,' ').replace(/&amp;/g,'&')},n.prototype._escapeJSON=function(e){for(var t='',o=0;o<e.length;){var n=e.charAt(o);'\n'==n?t+='\\n':'\\'==n?(t+=n,o++,n=e.charAt(o),(''===n||-1=='"\\/bfnrtu'.indexOf(n))&&(t+='\\'),t+=n):'"'==n?t+='\\"':t+=n,o++}return t};var l=a(n);e.exports=n},function(t){t.exports=function t(o,n){'use strict';var r=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,d=/^0/,c=function(e){return t.insensitive&&(''+e).toLowerCase()||''+e},i=c(o).replace(a,'')||'',p=c(n).replace(a,'')||'',u=i.replace(r,'\0$1\0').replace(/\0$/,'').replace(/^\0/,'').split('\0'),h=p.replace(r,'\0$1\0').replace(/\0$/,'').replace(/^\0/,'').split('\0'),m=parseInt(i.match(l),16)||1!==u.length&&i.match(s)&&Date.parse(i),g=parseInt(p.match(l),16)||m&&p.match(s)&&Date.parse(p)||null,f,y;if(g){if(m<g)return-1;if(m>g)return 1}for(var b=0,v=e(u.length,h.length);b<v;b++){if(f=!(u[b]||'').match(d)&&parseFloat(u[b])||u[b]||0,y=!(h[b]||'').match(d)&&parseFloat(h[b])||h[b]||0,isNaN(f)!==isNaN(y))return isNaN(f)?1:-1;if(typeof f!==typeof y&&(f+='',y+=''),f<y)return-1;if(f>y)return 1}return 0}},function(e,t,o){'use strict';var n=o(4),r=o(7);e.exports=function(e){function t(e){this.editor=e,this.dom={}}return t.prototype=new e,t.prototype.getDom=function(){var e=this.dom;if(e.tr)return e.tr;this._updateEditability();var t=document.createElement('tr');if(t.node=this,e.tr=t,'tree'===this.editor.options.mode){e.tdDrag=document.createElement('td');var o=document.createElement('td');e.tdMenu=o;var n=document.createElement('button');n.type='button',n.className='jsoneditor-contextmenu',n.title='Click to open the actions menu (Ctrl+M)',e.menu=n,o.appendChild(e.menu)}var r=document.createElement('td'),i=document.createElement('div');return i.innerHTML='(empty)',i.className='jsoneditor-readonly',r.appendChild(i),e.td=r,e.text=i,this.updateDom(),t},t.prototype.updateDom=function(){var e=this.dom,t=e.td;t&&(t.style.paddingLeft=24*this.getLevel()+26+'px');var o=e.text;o&&(o.innerHTML='(empty '+this.parent.type+')');var n=e.tr;this.isVisible()?!e.tr.firstChild&&(e.tdDrag&&n.appendChild(e.tdDrag),e.tdMenu&&n.appendChild(e.tdMenu),n.appendChild(t)):e.tr.firstChild&&(e.tdDrag&&n.removeChild(e.tdDrag),e.tdMenu&&n.removeChild(e.tdMenu),n.removeChild(t))},t.prototype.isVisible=function(){return 0==this.parent.childs.length},t.prototype.showContextMenu=function(t,o){var n=this,i=e.TYPE_TITLES,a=[{text:'Append',title:'Append a new field with type \'auto\' (Ctrl+Shift+Ins)',submenuTitle:'Select the type of the field to be appended',className:'jsoneditor-insert',click:function(){n._onAppend('','','auto')},submenu:[{text:'Auto',className:'jsoneditor-type-auto',title:i.auto,click:function(){n._onAppend('','','auto')}},{text:'Array',className:'jsoneditor-type-array',title:i.array,click:function(){n._onAppend('',[])}},{text:'Object',className:'jsoneditor-type-object',title:i.object,click:function(){n._onAppend('',{})}},{text:'String',className:'jsoneditor-type-string',title:i.string,click:function(){n._onAppend('','','string')}}]}],s=new r(a,{close:o});s.show(t,this.editor.content)},t.prototype.onEvent=function(e){var t=e.type,o=e.target||e.srcElement,r=this.dom,i=r.menu;if(o==i&&('mouseover'==t?this.editor.highlighter.highlight(this.parent):'mouseout'==t&&this.editor.highlighter.unhighlight()),'click'==t&&o==r.menu){var a=this.editor.highlighter;a.highlight(this.parent),a.lock(),n.addClassName(r.menu,'jsoneditor-selected'),this.showContextMenu(r.menu,function(){n.removeClassName(r.menu,'jsoneditor-selected'),a.unlock(),a.unhighlight()})}'keydown'==t&&this.onKeyDown(e)},t}},function(e,t,o){'use strict';function n(e,t,o,n){for(var a={code:{text:'Code',title:'Switch to code highlighter',click:function(){n('code')}},form:{text:'Form',title:'Switch to form editor',click:function(){n('form')}},text:{text:'Text',title:'Switch to plain text editor',click:function(){n('text')}},tree:{text:'Tree',title:'Switch to tree editor',click:function(){n('tree')}},view:{text:'View',title:'Switch to tree view',click:function(){n('view')}}},s=[],l=0;l<t.length;l++){var i=t[l],d=a[i];if(!d)throw new Error('Unknown mode "'+i+'"');d.className='jsoneditor-type-modes'+(o==i?' jsoneditor-selected':''),s.push(d)}var c=a[o];if(!c)throw new Error('Unknown mode "'+o+'"');var p=c.text,u=document.createElement('button');u.type='button',u.className='jsoneditor-modes jsoneditor-separator',u.innerHTML=p+' &#x25BE;',u.title='Switch editor mode',u.onclick=function(){var e=new r(s);e.show(u)};var h=document.createElement('div');h.className='jsoneditor-modes',h.style.position='relative',h.appendChild(u),e.appendChild(h),this.dom={container:e,box:u,frame:h}}var r=o(7);n.prototype.focus=function(){this.dom.box.focus()},n.prototype.destroy=function(){this.dom&&this.dom.frame&&this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom=null},e.exports=n},function(e,t,o){'use strict';var n;try{n=o(13)}catch(e){}var r=o(11),i=o(4),a={},s=3,l='ace/theme/jsoneditor';a.create=function(e,t){t=t||{},this.options=t,this.indentation=t.indentation?+t.indentation:2;var a=t.ace?t.ace:n;this.mode='code'==t.mode?'code':'text','code'==this.mode&&'undefined'===typeof a&&(this.mode='text',console.warn('Failed to load Ace editor, falling back to plain text mode. Please use a JSONEditor bundle including Ace, or pass Ace as via the configuration option `ace`.')),this.theme=t.theme||l,this.theme===l&&window.ace&&o(17);var s=this;this.container=e,this.dom={},this.aceEditor=void 0,this.textarea=void 0,this.validateSchema=null,this._debouncedValidate=i.debounce(this.validate.bind(this),this.DEBOUNCE_INTERVAL),this.width=e.clientWidth,this.height=e.clientHeight,this.frame=document.createElement('div'),this.frame.className='jsoneditor jsoneditor-mode-'+this.options.mode,this.frame.onclick=function(e){e.preventDefault()},this.frame.onkeydown=function(e){s._onKeyDown(e)},this.menu=document.createElement('div'),this.menu.className='jsoneditor-menu',this.frame.appendChild(this.menu);var d=document.createElement('button');d.type='button',d.className='jsoneditor-format',d.title='Format JSON data, with proper indentation and line feeds (Ctrl+\\)',this.menu.appendChild(d),d.onclick=function(){try{s.format(),s._onChange()}catch(e){s._onError(e)}};var c=document.createElement('button');if(c.type='button',c.className='jsoneditor-compact',c.title='Compact JSON data, remove all whitespaces (Ctrl+Shift+\\)',this.menu.appendChild(c),c.onclick=function(){try{s.compact(),s._onChange()}catch(e){s._onError(e)}},this.options&&this.options.modes&&this.options.modes.length&&(this.modeSwitcher=new r(this.menu,this.options.modes,this.options.mode,function(e){s.setMode(e),s.modeSwitcher.focus()})),this.content=document.createElement('div'),this.content.className='jsoneditor-outer',this.frame.appendChild(this.content),this.container.appendChild(this.frame),'code'==this.mode){this.editorDom=document.createElement('div'),this.editorDom.style.height='100%',this.editorDom.style.width='100%',this.content.appendChild(this.editorDom);var p=a.edit(this.editorDom);p.$blockScrolling=Infinity,p.setTheme(this.theme),p.setShowPrintMargin(!1),p.setFontSize(13),p.getSession().setMode('ace/mode/json'),p.getSession().setTabSize(this.indentation),p.getSession().setUseSoftTabs(!0),p.getSession().setUseWrapMode(!0),p.commands.bindKey('Ctrl-L',null),p.commands.bindKey('Command-L',null),this.aceEditor=p,this.hasOwnProperty('editor')||Object.defineProperty(this,'editor',{get:function(){return console.warn('Property "editor" has been renamed to "aceEditor".'),s.aceEditor},set:function(e){console.warn('Property "editor" has been renamed to "aceEditor".'),s.aceEditor=e}});var u=document.createElement('a');u.appendChild(document.createTextNode('powered by ace')),u.href='http://ace.ajax.org',u.target='_blank',u.className='jsoneditor-poweredBy',u.onclick=function(){window.open(u.href,u.target)},this.menu.appendChild(u),p.on('change',this._onChange.bind(this))}else{var h=document.createElement('textarea');h.className='jsoneditor-text',h.spellcheck=!1,this.content.appendChild(h),this.textarea=h,null===this.textarea.oninput?this.textarea.oninput=this._onChange.bind(this):this.textarea.onchange=this._onChange.bind(this)}this.setSchema(this.options.schema)},a._onChange=function(){if(this._debouncedValidate(),this.options.onChange)try{this.options.onChange()}catch(e){console.error('Error in onChange callback: ',e)}},a._onKeyDown=function(e){var t=e.which||e.keyCode,o=!1;220==t&&e.ctrlKey&&(e.shiftKey?(this.compact(),this._onChange()):(this.format(),this._onChange()),o=!0),o&&(e.preventDefault(),e.stopPropagation())},a.destroy=function(){this.aceEditor&&(this.aceEditor.destroy(),this.aceEditor=null),this.frame&&this.container&&this.frame.parentNode==this.container&&this.container.removeChild(this.frame),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null),this.textarea=null,this._debouncedValidate=null},a.compact=function(){var e=this.get(),t=JSON.stringify(e);this.setText(t)},a.format=function(){var e=this.get(),t=JSON.stringify(e,null,this.indentation);this.setText(t)},a.focus=function(){this.textarea&&this.textarea.focus(),this.aceEditor&&this.aceEditor.focus()},a.resize=function(){if(this.aceEditor){this.aceEditor.resize(!1)}},a.set=function(e){this.setText(JSON.stringify(e,null,this.indentation))},a.get=function(){var e=this.getText(),t;try{t=i.parse(e)}catch(o){e=i.sanitize(e),t=i.parse(e)}return t},a.getText=function(){return this.textarea?this.textarea.value:this.aceEditor?this.aceEditor.getValue():''},a.setText=function(e){var t;if(t=!0===this.options.escapeUnicode?i.escapeUnicodeChars(e):e,this.textarea&&(this.textarea.value=t),this.aceEditor){var o=this.options.onChange;this.options.onChange=null,this.aceEditor.setValue(t,-1),this.options.onChange=o}this.validate()},a.validate=function(){this.dom.validationErrors&&(this.dom.validationErrors.parentNode.removeChild(this.dom.validationErrors),this.dom.validationErrors=null,this.content.style.marginBottom='',this.content.style.paddingBottom='');var e=!1,t=[],o;try{o=this.get(),e=!0}catch(e){}if(e&&this.validateSchema){var n=this.validateSchema(o);n||(t=this.validateSchema.errors.map(function(e){return i.improveSchemaError(e)}))}if(0<t.length){var r=t.length>s;if(r){t=t.slice(0,s);var a=this.validateSchema.errors.length-s;t.push('('+a+' more errors...)')}var l=document.createElement('div');l.innerHTML='<table class="jsoneditor-text-errors"><tbody>'+t.map(function(e){var t;return t='string'===typeof e?'<td colspan="2"><pre>'+e+'</pre></td>':'<td>'+e.dataPath+'</td><td>'+e.message+'</td>','<tr><td><button class="jsoneditor-schema-error"></button></td>'+t+'</tr>'}).join('')+'</tbody></table>',this.dom.validationErrors=l,this.frame.appendChild(l);var d=l.clientHeight;this.content.style.marginBottom=-d+'px',this.content.style.paddingBottom=d+'px'}if(this.aceEditor){this.aceEditor.resize(!1)}},e.exports=[{mode:'text',mixin:a,data:'text',load:a.format},{mode:'code',mixin:a,data:'text',load:a.format}]},function(e,t,o){var n=o(!function(){var t=new Error('Cannot find module "brace"');throw t.code='MODULE_NOT_FOUND',t}());o(14),o(16),e.exports=n},function(e,t,o){ace.define('ace/mode/json_highlight_rules',['require','exports','module','ace/lib/oop','ace/mode/text_highlight_rules'],function(e,t){'use strict';var o=e('../lib/oop'),n=e('./text_highlight_rules').TextHighlightRules,r=function(){this.$rules={start:[{token:'variable',regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:'string',regex:'"',next:'string'},{token:'constant.numeric',regex:'0[xX][0-9a-fA-F]+\\b'},{token:'constant.numeric',regex:'[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b'},{token:'constant.language.boolean',regex:'(?:true|false)\\b'},{token:'invalid.illegal',regex:'[\'](?:(?:\\\\.)|(?:[^\'\\\\]))*?[\']'},{token:'invalid.illegal',regex:'\\/\\/.*$'},{token:'paren.lparen',regex:'[[({]'},{token:'paren.rparen',regex:'[\\])}]'},{token:'text',regex:'\\s+'}],string:[{token:'constant.language.escape',regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:'string',regex:'[^"\\\\]+'},{token:'string',regex:'"',next:'start'},{token:'string',regex:'',next:'start'}]}};o.inherits(r,n),t.JsonHighlightRules=r}),ace.define('ace/mode/matching_brace_outdent',['require','exports','module','ace/range'],function(e,t){'use strict';var o=e('../range').Range,n=function(){};(function(){this.checkOutdent=function(e,t){return!!/^\s+$/.test(e)&&/^\s*\}/.test(t)},this.autoOutdent=function(e,t){var n=e.getLine(t),r=n.match(/^(\s*\})/);if(!r)return 0;var i=r[1].length,a=e.findMatchingBracket({row:t,column:i});if(!a||a.row==t)return 0;var s=this.$getIndent(e.getLine(a.row));e.replace(new o(t,0,t,i-1),s)},this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(n.prototype),t.MatchingBraceOutdent=n}),ace.define('ace/mode/behaviour/cstyle',['require','exports','module','ace/lib/oop','ace/mode/behaviour','ace/token_iterator','ace/lib/lang'],function(e,t){'use strict';var o=e('../../lib/oop'),n=e('../behaviour').Behaviour,r=e('../../token_iterator').TokenIterator,i=e('../../lib/lang'),a=['text','paren.rparen','punctuation.operator'],s=['text','paren.rparen','punctuation.operator','comment'],l={},d=function(e){var t=-1;return e.multiSelect&&(t=e.selection.index,l.rangeCount!=e.multiSelect.rangeCount&&(l={rangeCount:e.multiSelect.rangeCount})),l[t]?u=l[t]:void(u=l[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:'',maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:'',maybeInsertedLineEnd:''})},c=function(e,t,o,n){var r=e.end.row-e.start.row;return{text:o+t+n,selection:[0,e.start.column+1,r,e.end.column+(r?0:1)]}},p=function(){this.add('braces','insertion',function(e,t,o,n,r){var a=o.getCursorPosition(),s=n.doc.getLine(a.row);if('{'==r){d(o);var l=o.getSelectionRange(),h=n.doc.getTextRange(l);if(''!==h&&'{'!==h&&o.getWrapBehavioursEnabled())return c(l,h,'{','}');if(p.isSaneInsertion(o,n))return /[\]\}\)]/.test(s[a.column])||o.inMultiSelectMode?(p.recordAutoInsert(o,n,'}'),{text:'{}',selection:[1,1]}):(p.recordMaybeInsert(o,n,'{'),{text:'{',selection:[1,1]})}else if('}'==r){d(o);var m=s.substring(a.column,a.column+1);if('}'==m){var g=n.$findOpeningBracket('}',{column:a.column+1,row:a.row});if(null!==g&&p.isAutoInsertedClosing(a,s,r))return p.popAutoInsertedClosing(),{text:'',selection:[1,1]}}}else{if('\n'==r||'\r\n'==r){d(o);var f='';p.isMaybeInsertedClosing(a,s)&&(f=i.stringRepeat('}',u.maybeInsertedBrackets),p.clearMaybeInsertedClosing());var m=s.substring(a.column,a.column+1);if('}'===m){var y=n.findMatchingBracket({row:a.row,column:a.column+1},'}');if(!y)return null;var b=this.$getIndent(n.getLine(y.row))}else if(f)var b=this.$getIndent(s);else return void p.clearMaybeInsertedClosing();var v=b+n.getTabString();return{text:'\n'+v+'\n'+b+f,selection:[1,v.length,1,v.length]}}p.clearMaybeInsertedClosing()}}),this.add('braces','deletion',function(e,t,o,n,r){var i=n.doc.getTextRange(r);if(!r.isMultiLine()&&'{'==i){d(o);var a=n.doc.getLine(r.start.row),s=a.substring(r.end.column,r.end.column+1);if('}'==s)return r.end.column++,r;u.maybeInsertedBrackets--}}),this.add('parens','insertion',function(e,t,o,n,r){if('('==r){d(o);var i=o.getSelectionRange(),a=n.doc.getTextRange(i);if(''!==a&&o.getWrapBehavioursEnabled())return c(i,a,'(',')');if(p.isSaneInsertion(o,n))return p.recordAutoInsert(o,n,')'),{text:'()',selection:[1,1]}}else if(')'==r){d(o);var s=o.getCursorPosition(),l=n.doc.getLine(s.row),u=l.substring(s.column,s.column+1);if(')'==u){var h=n.$findOpeningBracket(')',{column:s.column+1,row:s.row});if(null!==h&&p.isAutoInsertedClosing(s,l,r))return p.popAutoInsertedClosing(),{text:'',selection:[1,1]}}}}),this.add('parens','deletion',function(e,t,o,n,r){var i=n.doc.getTextRange(r);if(!r.isMultiLine()&&'('==i){d(o);var a=n.doc.getLine(r.start.row),s=a.substring(r.start.column+1,r.start.column+2);if(')'==s)return r.end.column++,r}}),this.add('brackets','insertion',function(e,t,o,n,r){if('['==r){d(o);var i=o.getSelectionRange(),a=n.doc.getTextRange(i);if(''!==a&&o.getWrapBehavioursEnabled())return c(i,a,'[',']');if(p.isSaneInsertion(o,n))return p.recordAutoInsert(o,n,']'),{text:'[]',selection:[1,1]}}else if(']'==r){d(o);var s=o.getCursorPosition(),l=n.doc.getLine(s.row),u=l.substring(s.column,s.column+1);if(']'==u){var h=n.$findOpeningBracket(']',{column:s.column+1,row:s.row});if(null!==h&&p.isAutoInsertedClosing(s,l,r))return p.popAutoInsertedClosing(),{text:'',selection:[1,1]}}}}),this.add('brackets','deletion',function(e,t,o,n,r){var i=n.doc.getTextRange(r);if(!r.isMultiLine()&&'['==i){d(o);var a=n.doc.getLine(r.start.row),s=a.substring(r.start.column+1,r.start.column+2);if(']'==s)return r.end.column++,r}}),this.add('string_dquotes','insertion',function(e,t,o,n,r){if('"'==r||'\''==r){d(o);var i=r,a=o.getSelectionRange(),s=n.doc.getTextRange(a);if(''!==s&&'\''!==s&&'"'!=s&&o.getWrapBehavioursEnabled())return c(a,s,i,i);if(!s){var l=o.getCursorPosition(),p=n.doc.getLine(l.row),u=p.substring(l.column-1,l.column),h=p.substring(l.column,l.column+1),m=n.getTokenAt(l.row,l.column),g=n.getTokenAt(l.row,l.column+1);if('\\'==u&&m&&/escape/.test(m.type))return null;var f=m&&/string|escape/.test(m.type),y=!g||/string|escape/.test(g.type),b;if(h==i)b=f!==y;else{if(f&&!y)return null;if(f&&y)return null;var v=n.$mode.tokenRe;v.lastIndex=0;var x=v.test(u);v.lastIndex=0;var w=v.test(u);if(x||w)return null;if(h&&!/[\s;,.})\]\\]/.test(h))return null;b=!0}return{text:b?i+i:'',selection:[1,1]}}}}),this.add('string_dquotes','deletion',function(e,t,o,n,r){var i=n.doc.getTextRange(r);if(!r.isMultiLine()&&('"'==i||'\''==i)){d(o);var a=n.doc.getLine(r.start.row),s=a.substring(r.start.column+1,r.start.column+2);if(s==i)return r.end.column++,r}})},u;p.isSaneInsertion=function(e,t){var o=e.getCursorPosition(),n=new r(t,o.row,o.column);if(!this.$matchTokenType(n.getCurrentToken()||'text',a)){var i=new r(t,o.row,o.column+1);if(!this.$matchTokenType(i.getCurrentToken()||'text',a))return!1}return n.stepForward(),n.getCurrentTokenRow()!==o.row||this.$matchTokenType(n.getCurrentToken()||'text',s)},p.$matchTokenType=function(e,t){return-1<t.indexOf(e.type||e)},p.recordAutoInsert=function(e,t,o){var n=e.getCursorPosition(),r=t.doc.getLine(n.row);this.isAutoInsertedClosing(n,r,u.autoInsertedLineEnd[0])||(u.autoInsertedBrackets=0),u.autoInsertedRow=n.row,u.autoInsertedLineEnd=o+r.substr(n.column),u.autoInsertedBrackets++},p.recordMaybeInsert=function(e,t,o){var n=e.getCursorPosition(),r=t.doc.getLine(n.row);this.isMaybeInsertedClosing(n,r)||(u.maybeInsertedBrackets=0),u.maybeInsertedRow=n.row,u.maybeInsertedLineStart=r.substr(0,n.column)+o,u.maybeInsertedLineEnd=r.substr(n.column),u.maybeInsertedBrackets++},p.isAutoInsertedClosing=function(e,t,o){return 0<u.autoInsertedBrackets&&e.row===u.autoInsertedRow&&o===u.autoInsertedLineEnd[0]&&t.substr(e.column)===u.autoInsertedLineEnd},p.isMaybeInsertedClosing=function(e,t){return 0<u.maybeInsertedBrackets&&e.row===u.maybeInsertedRow&&t.substr(e.column)===u.maybeInsertedLineEnd&&t.substr(0,e.column)==u.maybeInsertedLineStart},p.popAutoInsertedClosing=function(){u.autoInsertedLineEnd=u.autoInsertedLineEnd.substr(1),u.autoInsertedBrackets--},p.clearMaybeInsertedClosing=function(){u&&(u.maybeInsertedBrackets=0,u.maybeInsertedRow=-1)},o.inherits(p,n),t.CstyleBehaviour=p}),ace.define('ace/mode/folding/cstyle',['require','exports','module','ace/lib/oop','ace/range','ace/mode/folding/fold_mode'],function(e,t){'use strict';var o=e('../../lib/oop'),n=e('../../range').Range,r=e('./fold_mode').FoldMode,i=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,'|'+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,'|'+e.end)))};o.inherits(i,r),function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,o){var n=e.getLine(o);if(this.singleLineBlockCommentRe.test(n)&&!this.startRegionRe.test(n)&&!this.tripleStarBlockCommentRe.test(n))return'';var r=this._getFoldWidgetBase(e,t,o);return!r&&this.startRegionRe.test(n)?'start':r},this.getFoldWidgetRange=function(e,t,o,n){var r=e.getLine(o);if(this.startRegionRe.test(r))return this.getCommentRegionBlock(e,r,o);var a=r.match(this.foldingStartMarker);if(a){var s=a.index;if(a[1])return this.openingBracketBlock(e,a[1],o,s);var i=e.getCommentFoldRange(o,s+a[0].length,1);return i&&!i.isMultiLine()&&(n?i=this.getSectionRange(e,o):'all'!=t&&(i=null)),i}if('markbegin'!==t){var a=r.match(this.foldingStopMarker);if(a){var s=a.index+a[0].length;return a[1]?this.closingBracketBlock(e,a[1],o,s):e.getCommentFoldRange(o,s,-1)}}},this.getSectionRange=function(e,t){var o=e.getLine(t),r=o.search(/\S/),i=t,a=o.length;++t;for(var s=t,l=e.getLength();++t<l;){o=e.getLine(t);var d=o.search(/\S/);if(-1!==d){if(r>d)break;var c=this.getFoldWidgetRange(e,'all',t);if(c)if(c.start.row<=i)break;else if(c.isMultiLine())t=c.end.row;else if(r==d)break;s=t}}return new n(i,a,s,e.getLine(s).length)},this.getCommentRegionBlock=function(e,t,o){for(var r=t.search(/\s*$/),i=e.getLength(),a=o,s=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,l=1;++o<i;){t=e.getLine(o);var d=s.exec(t);if(d&&(d[1]?l--:l++,!l))break}var c=o;if(c>a)return new n(a,r,c,t.length)}}.call(i.prototype)}),ace.define('ace/mode/json',['require','exports','module','ace/lib/oop','ace/mode/text','ace/mode/json_highlight_rules','ace/mode/matching_brace_outdent','ace/mode/behaviour/cstyle','ace/mode/folding/cstyle','ace/worker/worker_client'],function(e,t){'use strict';var n=e('../lib/oop'),r=e('./text').Mode,i=e('./json_highlight_rules').JsonHighlightRules,a=e('./matching_brace_outdent').MatchingBraceOutdent,s=e('./behaviour/cstyle').CstyleBehaviour,l=e('./folding/cstyle').FoldMode,d=e('../worker/worker_client').WorkerClient,c=function(){this.HighlightRules=i,this.$outdent=new a,this.$behaviour=new s,this.foldingRules=new l};n.inherits(c,r),function(){this.getNextLineIndent=function(e,t,o){var n=this.$getIndent(t);if('start'==e){var r=t.match(/^.*[\{\(\[]\s*$/);r&&(n+=o)}return n},this.checkOutdent=function(e,t,o){return this.$outdent.checkOutdent(t,o)},this.autoOutdent=function(e,t,o){this.$outdent.autoOutdent(t,o)},this.createWorker=function(t){var e=new d(['ace'],o(15),'JsonWorker');return e.attachToDocument(t.getDocument()),e.on('annotate',function(o){t.setAnnotations(o.data)}),e.on('terminate',function(){t.clearAnnotations()}),e},this.$id='ace/mode/json'}.call(c.prototype),t.Mode=c})},function(e){e.exports.id='ace/mode/json_worker',e.exports.src='"no use strict";(function(window){function resolveModuleId(id,paths){for(var testPath=id,tail="";testPath;){var alias=paths[testPath];if("string"==typeof alias)return alias+tail;if(alias)return alias.location.replace(/\\/*$/,"/")+(tail||alias.main||alias.name);if(alias===!1)return"";var i=testPath.lastIndexOf("/");if(-1===i)break;tail=testPath.substr(i)+tail,testPath=testPath.slice(0,i)}return id}if(!(void 0!==window.window&&window.document||window.acequire&&window.define)){window.console||(window.console=function(){var msgs=Array.prototype.slice.call(arguments,0);postMessage({type:"log",data:msgs})},window.console.error=window.console.warn=window.console.log=window.console.trace=window.console),window.window=window,window.ace=window,window.onerror=function(message,file,line,col,err){postMessage({type:"error",data:{message:message,data:err.data,file:file,line:line,col:col,stack:err.stack}})},window.normalizeModule=function(parentId,moduleName){if(-1!==moduleName.indexOf("!")){var chunks=moduleName.split("!");return window.normalizeModule(parentId,chunks[0])+"!"+window.normalizeModule(parentId,chunks[1])}if("."==moduleName.charAt(0)){var base=parentId.split("/").slice(0,-1).join("/");for(moduleName=(base?base+"/":"")+moduleName;-1!==moduleName.indexOf(".")&&previous!=moduleName;){var previous=moduleName;moduleName=moduleName.replace(/^\\.\\//,"").replace(/\\/\\.\\//,"/").replace(/[^\\/]+\\/\\.\\.\\//,"")}}return moduleName},window.acequire=function acequire(parentId,id){if(id||(id=parentId,parentId=null),!id.charAt)throw Error("worker.js acequire() accepts only (parentId, id) as arguments");id=window.normalizeModule(parentId,id);var module=window.acequire.modules[id];if(module)return module.initialized||(module.initialized=!0,module.exports=module.factory().exports),module.exports;if(!window.acequire.tlns)return console.log("unable to load "+id);var path=resolveModuleId(id,window.acequire.tlns);return".js"!=path.slice(-3)&&(path+=".js"),window.acequire.id=id,window.acequire.modules[id]={},importScripts(path),window.acequire(parentId,id)},window.acequire.modules={},window.acequire.tlns={},window.define=function(id,deps,factory){if(2==arguments.length?(factory=deps,"string"!=typeof id&&(deps=id,id=window.acequire.id)):1==arguments.length&&(factory=id,deps=[],id=window.acequire.id),"function"!=typeof factory)return window.acequire.modules[id]={exports:factory,initialized:!0},void 0;deps.length||(deps=["require","exports","module"]);var req=function(childId){return window.acequire(id,childId)};window.acequire.modules[id]={exports:{},factory:function(){var module=this,returnExports=factory.apply(this,deps.map(function(dep){switch(dep){case"require":return req;case"exports":return module.exports;case"module":return module;default:return req(dep)}}));return returnExports&&(module.exports=returnExports),module}}},window.define.amd={},acequire.tlns={},window.initBaseUrls=function(topLevelNamespaces){for(var i in topLevelNamespaces)acequire.tlns[i]=topLevelNamespaces[i]},window.initSender=function(){var EventEmitter=window.acequire("ace/lib/event_emitter").EventEmitter,oop=window.acequire("ace/lib/oop"),Sender=function(){};return function(){oop.implement(this,EventEmitter),this.callback=function(data,callbackId){postMessage({type:"call",id:callbackId,data:data})},this.emit=function(name,data){postMessage({type:"event",name:name,data:data})}}.call(Sender.prototype),new Sender};var main=window.main=null,sender=window.sender=null;window.onmessage=function(e){var msg=e.data;if(msg.event&&sender)sender._signal(msg.event,msg.data);else if(msg.command)if(main[msg.command])main[msg.command].apply(main,msg.args);else{if(!window[msg.command])throw Error("Unknown command:"+msg.command);window[msg.command].apply(window,msg.args)}else if(msg.init){window.initBaseUrls(msg.tlns),acequire("ace/lib/es5-shim"),sender=window.sender=window.initSender();var clazz=acequire(msg.module)[msg.classname];main=window.main=new clazz(sender)}}}})(this),ace.define("ace/lib/oop",["require","exports","module"],function(acequire,exports){"use strict";exports.inherits=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},exports.mixin=function(obj,mixin){for(var key in mixin)obj[key]=mixin[key];return obj},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}}),ace.define("ace/range",["require","exports","module"],function(acequire,exports){"use strict";var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn},this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(row,column){return 0==this.compare(row,column)},this.compareRange=function(range){var cmp,end=range.end,start=range.start;return cmp=this.compare(end.row,end.column),1==cmp?(cmp=this.compare(start.row,start.column),1==cmp?2:0==cmp?1:0):-1==cmp?-2:(cmp=this.compare(start.row,start.column),-1==cmp?-1:1==cmp?42:0)},this.comparePoint=function(p){return this.compare(p.row,p.column)},this.containsRange=function(range){return 0==this.comparePoint(range.start)&&0==this.comparePoint(range.end)},this.intersects=function(range){var cmp=this.compareRange(range);return-1==cmp||0==cmp||1==cmp},this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column},this.isStart=function(row,column){return this.start.row==row&&this.start.column==column},this.setStart=function(row,column){"object"==typeof row?(this.start.column=row.column,this.start.row=row.row):(this.start.row=row,this.start.column=column)},this.setEnd=function(row,column){"object"==typeof row?(this.end.column=row.column,this.end.row=row.row):(this.end.row=row,this.end.column=column)},this.inside=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)||this.isStart(row,column)?!1:!0:!1},this.insideStart=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)?!1:!0:!1},this.insideEnd=function(row,column){return 0==this.compare(row,column)?this.isStart(row,column)?!1:!0:!1},this.compare=function(row,column){return this.isMultiLine()||row!==this.start.row?this.start.row>row?-1:row>this.end.row?1:this.start.row===row?column>=this.start.column?0:-1:this.end.row===row?this.end.column>=column?0:1:0:this.start.column>column?-1:column>this.end.column?1:0},this.compareStart=function(row,column){return this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.compareEnd=function(row,column){return this.end.row==row&&this.end.column==column?1:this.compare(row,column)},this.compareInside=function(row,column){return this.end.row==row&&this.end.column==column?1:this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};else if(firstRow>this.end.row)var end={row:firstRow,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};else if(firstRow>this.start.row)var start={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)},this.extend=function(row,column){var cmp=this.compare(row,column);if(0==cmp)return this;if(-1==cmp)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return Range.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Range(this.start.row,0,this.end.row,0)},this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start),screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)},this.moveBy=function(row,column){this.start.row+=row,this.start.column+=column,this.end.row+=row,this.end.column+=column}}).call(Range.prototype),Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)},Range.comparePoints=comparePoints,Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},exports.Range=Range}),ace.define("ace/apply_delta",["require","exports","module"],function(acequire,exports){"use strict";exports.applyDelta=function(docLines,delta){var row=delta.start.row,startColumn=delta.start.column,line=docLines[row]||"";switch(delta.action){case"insert":var lines=delta.lines;if(1===lines.length)docLines[row]=line.substring(0,startColumn)+delta.lines[0]+line.substring(startColumn);else{var args=[row,1].concat(delta.lines);docLines.splice.apply(docLines,args),docLines[row]=line.substring(0,startColumn)+docLines[row],docLines[row+delta.lines.length-1]+=line.substring(startColumn)}break;case"remove":var endColumn=delta.end.column,endRow=delta.end.row;row===endRow?docLines[row]=line.substring(0,startColumn)+line.substring(endColumn):docLines.splice(row,endRow-row+1,line.substring(0,startColumn)+docLines[endRow].substring(endColumn))}}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(acequire,exports){"use strict";var EventEmitter={},stopPropagation=function(){this.propagationStopped=!0},preventDefault=function(){this.defaultPrevented=!0};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var listeners=this._eventRegistry[eventName]||[],defaultHandler=this._defaultHandlers[eventName];if(listeners.length||defaultHandler){"object"==typeof e&&e||(e={}),e.type||(e.type=eventName),e.stopPropagation||(e.stopPropagation=stopPropagation),e.preventDefault||(e.preventDefault=preventDefault),listeners=listeners.slice();for(var i=0;listeners.length>i&&(listeners[i](e,this),!e.propagationStopped);i++);return defaultHandler&&!e.defaultPrevented?defaultHandler(e,this):void 0}},EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName];if(listeners){listeners=listeners.slice();for(var i=0;listeners.length>i;i++)listeners[i](e,this)}},EventEmitter.once=function(eventName,callback){var _self=this;callback&&this.addEventListener(eventName,function newCallback(){_self.removeEventListener(eventName,newCallback),callback.apply(null,arguments)})},EventEmitter.setDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers||(handlers=this._defaultHandlers={_disabled_:{}}),handlers[eventName]){var old=handlers[eventName],disabled=handlers._disabled_[eventName];disabled||(handlers._disabled_[eventName]=disabled=[]),disabled.push(old);var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}handlers[eventName]=callback},EventEmitter.removeDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers){var disabled=handlers._disabled_[eventName];if(handlers[eventName]==callback)handlers[eventName],disabled&&this.setDefaultHandler(eventName,disabled.pop());else if(disabled){var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}}},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];return listeners||(listeners=this._eventRegistry[eventName]=[]),-1==listeners.indexOf(callback)&&listeners[capturing?"unshift":"push"](callback),callback},EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(listeners){var index=listeners.indexOf(callback);-1!==index&&listeners.splice(index,1)}},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])},exports.EventEmitter=EventEmitter}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),EventEmitter=acequire("./lib/event_emitter").EventEmitter,Anchor=exports.Anchor=function(doc,row,column){this.$onChange=this.onChange.bind(this),this.attach(doc),column===void 0?this.setPosition(row.row,row.column):this.setPosition(row,column)};(function(){function $pointsInOrder(point1,point2,equalPointsInOrder){var bColIsAfter=equalPointsInOrder?point1.column<=point2.column:point1.column<point2.column;return point1.row<point2.row||point1.row==point2.row&&bColIsAfter}function $getTransformedPoint(delta,point,moveIfEqual){var deltaIsInsert="insert"==delta.action,deltaRowShift=(deltaIsInsert?1:-1)*(delta.end.row-delta.start.row),deltaColShift=(deltaIsInsert?1:-1)*(delta.end.column-delta.start.column),deltaStart=delta.start,deltaEnd=deltaIsInsert?deltaStart:delta.end;return $pointsInOrder(point,deltaStart,moveIfEqual)?{row:point.row,column:point.column}:$pointsInOrder(deltaEnd,point,!moveIfEqual)?{row:point.row+deltaRowShift,column:point.column+(point.row==deltaEnd.row?deltaColShift:0)}:{row:deltaStart.row,column:deltaStart.column}}oop.implement(this,EventEmitter),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(delta){if(!(delta.start.row==delta.end.row&&delta.start.row!=this.row||delta.start.row>this.row)){var point=$getTransformedPoint(delta,{row:this.row,column:this.column},this.$insertRight);this.setPosition(point.row,point.column,!0)}},this.setPosition=function(row,column,noClip){var pos;if(pos=noClip?{row:row,column:column}:this.$clipPositionToDocument(row,column),this.row!=pos.row||this.column!=pos.column){var old={row:this.row,column:this.column};this.row=pos.row,this.column=pos.column,this._signal("change",{old:old,value:pos})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(doc){this.document=doc||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(row,column){var pos={};return row>=this.document.getLength()?(pos.row=Math.max(0,this.document.getLength()-1),pos.column=this.document.getLine(pos.row).length):0>row?(pos.row=0,pos.column=0):(pos.row=row,pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))),0>column&&(pos.column=0),pos}}).call(Anchor.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),applyDelta=acequire("./apply_delta").applyDelta,EventEmitter=acequire("./lib/event_emitter").EventEmitter,Range=acequire("./range").Range,Anchor=acequire("./anchor").Anchor,Document=function(textOrLines){this.$lines=[""],0===textOrLines.length?this.$lines=[""]:Array.isArray(textOrLines)?this.insertMergedLines({row:0,column:0},textOrLines):this.insert({row:0,column:0},textOrLines)};(function(){oop.implement(this,EventEmitter),this.setValue=function(text){var len=this.getLength()-1;this.remove(new Range(0,0,len,this.getLine(len).length)),this.insert({row:0,column:0},text)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(row,column){return new Anchor(this,row,column)},this.$split=0==="aaa".split(/a/).length?function(text){return text.replace(/\\r\\n|\\r/g,"\\n").split("\\n")}:function(text){return text.split(/\\r\\n|\\r|\\n/)},this.$detectNewLine=function(text){var match=text.match(/^.*?(\\r\\n|\\r|\\n)/m);this.$autoNewLine=match?match[1]:"\\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\\r\\n";case"unix":return"\\n";default:return this.$autoNewLine||"\\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(newLineMode){this.$newLineMode!==newLineMode&&(this.$newLineMode=newLineMode,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(text){return"\\r\\n"==text||"\\r"==text||"\\n"==text},this.getLine=function(row){return this.$lines[row]||""},this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(range){return this.getLinesForRange(range).join(this.getNewLineCharacter())},this.getLinesForRange=function(range){var lines;if(range.start.row===range.end.row)lines=[this.getLine(range.start.row).substring(range.start.column,range.end.column)];else{lines=this.getLines(range.start.row,range.end.row),lines[0]=(lines[0]||"").substring(range.start.column);var l=lines.length-1;range.end.row-range.start.row==l&&(lines[l]=lines[l].substring(0,range.end.column))}return lines},this.insertLines=function(row,lines){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(row,lines)},this.removeLines=function(firstRow,lastRow){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(firstRow,lastRow)},this.insertNewLine=function(position){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\'\', \'\']) instead."),this.insertMergedLines(position,["",""])},this.insert=function(position,text){return 1>=this.getLength()&&this.$detectNewLine(text),this.insertMergedLines(position,this.$split(text))},this.insertInLine=function(position,text){var start=this.clippedPos(position.row,position.column),end=this.pos(position.row,position.column+text.length);return this.applyDelta({start:start,end:end,action:"insert",lines:[text]},!0),this.clonePos(end)},this.clippedPos=function(row,column){var length=this.getLength();void 0===row?row=length:0>row?row=0:row>=length&&(row=length-1,column=void 0);var line=this.getLine(row);return void 0==column&&(column=line.length),column=Math.min(Math.max(column,0),line.length),{row:row,column:column}},this.clonePos=function(pos){return{row:pos.row,column:pos.column}},this.pos=function(row,column){return{row:row,column:column}},this.$clipPosition=function(position){var length=this.getLength();return position.row>=length?(position.row=Math.max(0,length-1),position.column=this.getLine(length-1).length):(position.row=Math.max(0,position.row),position.column=Math.min(Math.max(position.column,0),this.getLine(position.row).length)),position},this.insertFullLines=function(row,lines){row=Math.min(Math.max(row,0),this.getLength());var column=0;this.getLength()>row?(lines=lines.concat([""]),column=0):(lines=[""].concat(lines),row--,column=this.$lines[row].length),this.insertMergedLines({row:row,column:column},lines)},this.insertMergedLines=function(position,lines){var start=this.clippedPos(position.row,position.column),end={row:start.row+lines.length-1,column:(1==lines.length?start.column:0)+lines[lines.length-1].length};return this.applyDelta({start:start,end:end,action:"insert",lines:lines}),this.clonePos(end)},this.remove=function(range){var start=this.clippedPos(range.start.row,range.start.column),end=this.clippedPos(range.end.row,range.end.column);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})}),this.clonePos(start)},this.removeInLine=function(row,startColumn,endColumn){var start=this.clippedPos(row,startColumn),end=this.clippedPos(row,endColumn);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})},!0),this.clonePos(start)},this.removeFullLines=function(firstRow,lastRow){firstRow=Math.min(Math.max(0,firstRow),this.getLength()-1),lastRow=Math.min(Math.max(0,lastRow),this.getLength()-1);var deleteFirstNewLine=lastRow==this.getLength()-1&&firstRow>0,deleteLastNewLine=this.getLength()-1>lastRow,startRow=deleteFirstNewLine?firstRow-1:firstRow,startCol=deleteFirstNewLine?this.getLine(startRow).length:0,endRow=deleteLastNewLine?lastRow+1:lastRow,endCol=deleteLastNewLine?0:this.getLine(endRow).length,range=new Range(startRow,startCol,endRow,endCol),deletedLines=this.$lines.slice(firstRow,lastRow+1);return this.applyDelta({start:range.start,end:range.end,action:"remove",lines:this.getLinesForRange(range)}),deletedLines},this.removeNewLine=function(row){this.getLength()-1>row&&row>=0&&this.applyDelta({start:this.pos(row,this.getLine(row).length),end:this.pos(row+1,0),action:"remove",lines:["",""]})},this.replace=function(range,text){if(range instanceof Range||(range=Range.fromPoints(range.start,range.end)),0===text.length&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);var end;return end=text?this.insert(range.start,text):range.start},this.applyDeltas=function(deltas){for(var i=0;deltas.length>i;i++)this.applyDelta(deltas[i])},this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--)this.revertDelta(deltas[i])},this.applyDelta=function(delta,doNotValidate){var isInsert="insert"==delta.action;(isInsert?1>=delta.lines.length&&!delta.lines[0]:!Range.comparePoints(delta.start,delta.end))||(isInsert&&delta.lines.length>2e4&&this.$splitAndapplyLargeDelta(delta,2e4),applyDelta(this.$lines,delta,doNotValidate),this._signal("change",delta))},this.$splitAndapplyLargeDelta=function(delta,MAX){for(var lines=delta.lines,l=lines.length,row=delta.start.row,column=delta.start.column,from=0,to=0;;){from=to,to+=MAX-1;var chunk=lines.slice(from,to);if(to>l){delta.lines=chunk,delta.start.row=row+from,delta.start.column=column;break}chunk.push(""),this.applyDelta({start:this.pos(row+from,column),end:this.pos(row+to,column=0),action:delta.action,lines:chunk},!0)}},this.revertDelta=function(delta){this.applyDelta({start:this.clonePos(delta.start),end:this.clonePos(delta.end),action:"insert"==delta.action?"remove":"insert",lines:delta.lines.slice()})},this.indexToPosition=function(index,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,i=startRow||0,l=lines.length;l>i;i++)if(index-=lines[i].length+newlineLength,0>index)return{row:i,column:index+lines[i].length+newlineLength};return{row:l-1,column:lines[l-1].length}},this.positionToIndex=function(pos,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,index=0,row=Math.min(pos.row,lines.length),i=startRow||0;row>i;++i)index+=lines[i].length+newlineLength;return index+pos.column}}).call(Document.prototype),exports.Document=Document}),ace.define("ace/lib/lang",["require","exports","module"],function(acequire,exports){"use strict";exports.last=function(a){return a[a.length-1]},exports.stringReverse=function(string){return string.split("").reverse().join("")},exports.stringRepeat=function(string,count){for(var result="";count>0;)1&count&&(result+=string),(count>>=1)&&(string+=string);return result};var trimBeginRegexp=/^\\s\\s*/,trimEndRegexp=/\\s\\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,"")},exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,"")},exports.copyObject=function(obj){var copy={};for(var key in obj)copy[key]=obj[key];return copy},exports.copyArray=function(array){for(var copy=[],i=0,l=array.length;l>i;i++)copy[i]=array[i]&&"object"==typeof array[i]?this.copyObject(array[i]):array[i];return copy},exports.deepCopy=function deepCopy(obj){if("object"!=typeof obj||!obj)return obj;var copy;if(Array.isArray(obj)){copy=[];for(var key=0;obj.length>key;key++)copy[key]=deepCopy(obj[key]);return copy}var cons=obj.constructor;if(cons===RegExp)return obj;copy=cons();for(var key in obj)copy[key]=deepCopy(obj[key]);return copy},exports.arrayToMap=function(arr){for(var map={},i=0;arr.length>i;i++)map[arr[i]]=1;return map},exports.createMap=function(props){var map=Object.create(null);for(var i in props)map[i]=props[i];return map},exports.arrayRemove=function(array,value){for(var i=0;array.length>=i;i++)value===array[i]&&array.splice(i,1)},exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g,"\\\\$1")},exports.escapeHTML=function(str){return str.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/\'/g,"&#39;").replace(/</g,"&#60;")},exports.getMatchOffsets=function(string,regExp){var matches=[];return string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})}),matches},exports.deferredCall=function(fcn){var timer=null,callback=function(){timer=null,fcn()},deferred=function(timeout){return deferred.cancel(),timer=setTimeout(callback,timeout||0),deferred};return deferred.schedule=deferred,deferred.call=function(){return this.cancel(),fcn(),deferred},deferred.cancel=function(){return clearTimeout(timer),timer=null,deferred},deferred.isPending=function(){return timer},deferred},exports.delayedCall=function(fcn,defaultTimeout){var timer=null,callback=function(){timer=null,fcn()},_self=function(timeout){null==timer&&(timer=setTimeout(callback,timeout||defaultTimeout))};return _self.delay=function(timeout){timer&&clearTimeout(timer),timer=setTimeout(callback,timeout||defaultTimeout)},_self.schedule=_self,_self.call=function(){this.cancel(),fcn()},_self.cancel=function(){timer&&clearTimeout(timer),timer=null},_self.isPending=function(){return timer},_self}}),ace.define("ace/worker/mirror",["require","exports","module","ace/range","ace/document","ace/lib/lang"],function(acequire,exports){"use strict";acequire("../range").Range;var Document=acequire("../document").Document,lang=acequire("../lib/lang"),Mirror=exports.Mirror=function(sender){this.sender=sender;var doc=this.doc=new Document(""),deferredUpdate=this.deferredUpdate=lang.delayedCall(this.onUpdate.bind(this)),_self=this;sender.on("change",function(e){var data=e.data;if(data[0].start)doc.applyDeltas(data);else for(var i=0;data.length>i;i+=2){if(Array.isArray(data[i+1]))var d={action:"insert",start:data[i],lines:data[i+1]};else var d={action:"remove",start:data[i],end:data[i+1]};doc.applyDelta(d,!0)}return _self.$timeout?deferredUpdate.schedule(_self.$timeout):(_self.onUpdate(),void 0)})};(function(){this.$timeout=500,this.setTimeout=function(timeout){this.$timeout=timeout},this.setValue=function(value){this.doc.setValue(value),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(callbackId){this.sender.callback(this.doc.getValue(),callbackId)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(Mirror.prototype)}),ace.define("ace/mode/json/json_parse",["require","exports","module"],function(){"use strict";var at,ch,text,value,escapee={\'"\':\'"\',"\\\\":"\\\\","/":"/",b:"\\b",f:"\\f",n:"\\n",r:"\\r",t:"\t"},error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text}},next=function(c){return c&&c!==ch&&error("Expected \'"+c+"\' instead of \'"+ch+"\'"),ch=text.charAt(at),at+=1,ch},number=function(){var number,string="";for("-"===ch&&(string="-",next("-"));ch>="0"&&"9">=ch;)string+=ch,next();if("."===ch)for(string+=".";next()&&ch>="0"&&"9">=ch;)string+=ch;if("e"===ch||"E"===ch)for(string+=ch,next(),("-"===ch||"+"===ch)&&(string+=ch,next());ch>="0"&&"9">=ch;)string+=ch,next();return number=+string,isNaN(number)?(error("Bad number"),void 0):number},string=function(){var hex,i,uffff,string="";if(\'"\'===ch)for(;next();){if(\'"\'===ch)return next(),string;if("\\\\"===ch)if(next(),"u"===ch){for(uffff=0,i=0;4>i&&(hex=parseInt(next(),16),isFinite(hex));i+=1)uffff=16*uffff+hex;string+=String.fromCharCode(uffff)}else{if("string"!=typeof escapee[ch])break;string+=escapee[ch]}else string+=ch}error("Bad string")},white=function(){for(;ch&&" ">=ch;)next()},word=function(){switch(ch){case"t":return next("t"),next("r"),next("u"),next("e"),!0;case"f":return next("f"),next("a"),next("l"),next("s"),next("e"),!1;case"n":return next("n"),next("u"),next("l"),next("l"),null}error("Unexpected \'"+ch+"\'")},array=function(){var array=[];if("["===ch){if(next("["),white(),"]"===ch)return next("]"),array;for(;ch;){if(array.push(value()),white(),"]"===ch)return next("]"),array;next(","),white()}}error("Bad array")},object=function(){var key,object={};if("{"===ch){if(next("{"),white(),"}"===ch)return next("}"),object;for(;ch;){if(key=string(),white(),next(":"),Object.hasOwnProperty.call(object,key)&&error(\'Duplicate key "\'+key+\'"\'),object[key]=value(),white(),"}"===ch)return next("}"),object;next(","),white()}}error("Bad object")};return value=function(){switch(white(),ch){case"{":return object();case"[":return array();case\'"\':return string();case"-":return number();default:return ch>="0"&&"9">=ch?number():word()}},function(source,reviver){var result;return text=source,at=0,ch=" ",result=value(),white(),ch&&error("Syntax error"),"function"==typeof reviver?function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}({"":result},""):result}}),ace.define("ace/mode/json_worker",["require","exports","module","ace/lib/oop","ace/worker/mirror","ace/mode/json/json_parse"],function(acequire,exports){"use strict";var oop=acequire("../lib/oop"),Mirror=acequire("../worker/mirror").Mirror,parse=acequire("./json/json_parse"),JsonWorker=exports.JsonWorker=function(sender){Mirror.call(this,sender),this.setTimeout(200)};oop.inherits(JsonWorker,Mirror),function(){this.onUpdate=function(){var value=this.doc.getValue(),errors=[];try{value&&parse(value)}catch(e){var pos=this.doc.indexToPosition(e.at-1);errors.push({row:pos.row,column:pos.column,text:e.message,type:"error"})}this.sender.emit("annotate",errors)}}.call(JsonWorker.prototype)}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(){function Empty(){}function doesDefinePropertyWork(object){try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){}}function toInteger(n){return n=+n,n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if("function"!=typeof target)throw new TypeError("Function.prototype.bind called on incompatible "+target);var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))};return target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound});var defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors,call=Function.prototype.call,prototypeOfArray=Array.prototype,prototypeOfObject=Object.prototype,slice=prototypeOfArray.slice,_toString=call.bind(prototypeOfObject.toString),owns=call.bind(prototypeOfObject.hasOwnProperty);if((supportsAccessors=owns(prototypeOfObject,"__defineGetter__"))&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function makeArray(l){var a=Array(l+2);return a[0]=a[1]=0,a}var lengthBefore,array=[];return array.splice.apply(array,makeArray(20)),array.splice.apply(array,makeArray(26)),lengthBefore=array.length,array.splice(5,0,"XXX"),lengthBefore+1==array.length,lengthBefore+1==array.length?!0:void 0\n}()){var array_splice=Array.prototype.splice;Array.prototype.splice=function(start,deleteCount){return arguments.length?array_splice.apply(this,[void 0===start?0:start,void 0===deleteCount?this.length-start:deleteCount].concat(slice.call(arguments,2))):[]}}else Array.prototype.splice=function(pos,removeCount){var length=this.length;pos>0?pos>length&&(pos=length):void 0==pos?pos=0:0>pos&&(pos=Math.max(length+pos,0)),length>pos+removeCount||(removeCount=length-pos);var removed=this.slice(pos,pos+removeCount),insert=slice.call(arguments,2),add=insert.length;if(pos===length)add&&this.push.apply(this,insert);else{var remove=Math.min(removeCount,length-pos),tailOldPos=pos+remove,tailNewPos=tailOldPos+add-remove,tailCount=length-tailOldPos,lengthAfterRemove=length-remove;if(tailOldPos>tailNewPos)for(var i=0;tailCount>i;++i)this[tailNewPos+i]=this[tailOldPos+i];else if(tailNewPos>tailOldPos)for(i=tailCount;i--;)this[tailNewPos+i]=this[tailOldPos+i];if(add&&pos===lengthAfterRemove)this.length=lengthAfterRemove,this.push.apply(this,insert);else for(this.length=lengthAfterRemove+add,i=0;add>i;++i)this[pos+i]=insert[i]}return removed};Array.isArray||(Array.isArray=function(obj){return"[object Array]"==_toString(obj)});var boxedString=Object("a"),splitString="a"!=boxedString[0]||!(0 in boxedString);if(Array.prototype.forEach||(Array.prototype.forEach=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,thisp=arguments[1],i=-1,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError;for(;length>++i;)i in self&&fun.call(thisp,self[i],i,object)}),Array.prototype.map||(Array.prototype.map=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,object));return result}),Array.prototype.filter||(Array.prototype.filter=function(fun){var value,object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=[],thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(value=self[i],fun.call(thisp,value,i,object)&&result.push(value));return result}),Array.prototype.every||(Array.prototype.every=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&!fun.call(thisp,self[i],i,object))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&fun.call(thisp,self[i],i,object))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;length>i;i++)i in self&&(result=fun.call(void 0,result,self[i],i,object));return result}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var result,i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(0>--i)throw new TypeError("reduceRight of empty array with no initial value")}do i in this&&(result=fun.call(void 0,result,self[i],i,object));while(i--);return result}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=0;for(arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);length>i;i++)if(i in self&&self[i]===sought)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=length-1;for(arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&sought===self[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)}),!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(object,property){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT+object);if(owns(object,property)){var descriptor,getter,setter;if(descriptor={enumerable:!0,configurable:!0},supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(object.__proto__=prototype,getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)}),!Object.create){var createEmpty;createEmpty=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var empty={};for(var i in empty)empty[i]=null;return empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null,empty},Object.create=function(prototype,properties){var object;if(null===prototype)object=createEmpty();else{if("object"!=typeof prototype)throw new TypeError("typeof prototype["+typeof prototype+"] != \'object\'");var Type=function(){};Type.prototype=prototype,object=new Type,object.__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom="undefined"==typeof document||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR="Property description must be an object: ",ERR_NON_OBJECT_TARGET="Object.defineProperty called on non-object: ",ERR_ACCESSORS_NOT_SUPPORTED="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(object,property,descriptor){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if("object"!=typeof descriptor&&"function"!=typeof descriptor||null===descriptor)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if(owns(descriptor,"value"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);owns(descriptor,"get")&&defineGetter(object,property,descriptor.get),owns(descriptor,"set")&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties||(Object.defineProperties=function(object,properties){for(var property in properties)owns(properties,property)&&Object.defineProperty(object,property,properties[property]);return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){return"function"==typeof object?object:freezeObject(object)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(object){return object}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)===object)throw new TypeError;for(var name="";owns(object,name);)name+="?";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue}),!Object.keys){var hasDontEnumBug=!0,dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function(object){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError("Object.keys called on a non-object");var keys=[];for(var name in object)owns(object,name)&&keys.push(name);if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;ii>i;i++){var dontEnum=dontEnums[i];owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}Date.now||(Date.now=function(){return(new Date).getTime()});var ws="\t\\n\x0B\\f\\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\\u2028\\u2029\uFEFF";if(!String.prototype.trim||ws.trim()){ws="["+ws+"]";var trimBeginRegexp=RegExp("^"+ws+ws+"*"),trimEndRegexp=RegExp(ws+ws+"*$");String.prototype.trim=function(){return(this+"").replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}}var toObject=function(o){if(null==o)throw new TypeError("can\'t convert "+o+" to object");return Object(o)}});'},function(){ace.define('ace/ext/searchbox',['require','exports','module','ace/lib/dom','ace/lib/lang','ace/lib/event','ace/keyboard/hash_handler','ace/lib/keys'],function(e,t){'use strict';var o=e('../lib/dom'),n=e('../lib/lang'),r=e('../lib/event'),i=e('../keyboard/hash_handler').HashHandler,a=e('../lib/keys');o.importCssString('\t.ace_search {\tbackground-color: #ddd;\tborder: 1px solid #cbcbcb;\tborder-top: 0 none;\tmax-width: 325px;\toverflow: hidden;\tmargin: 0;\tpadding: 4px;\tpadding-right: 6px;\tpadding-bottom: 0;\tposition: absolute;\ttop: 0px;\tz-index: 99;\twhite-space: normal;\t}\t.ace_search.left {\tborder-left: 0 none;\tborder-radius: 0px 0px 5px 0px;\tleft: 0;\t}\t.ace_search.right {\tborder-radius: 0px 0px 0px 5px;\tborder-right: 0 none;\tright: 0;\t}\t.ace_search_form, .ace_replace_form {\tborder-radius: 3px;\tborder: 1px solid #cbcbcb;\tfloat: left;\tmargin-bottom: 4px;\toverflow: hidden;\t}\t.ace_search_form.ace_nomatch {\toutline: 1px solid red;\t}\t.ace_search_field {\tbackground-color: white;\tborder-right: 1px solid #cbcbcb;\tborder: 0 none;\t-webkit-box-sizing: border-box;\t-moz-box-sizing: border-box;\tbox-sizing: border-box;\tfloat: left;\theight: 22px;\toutline: 0;\tpadding: 0 7px;\twidth: 214px;\tmargin: 0;\t}\t.ace_searchbtn,\t.ace_replacebtn {\tbackground: #fff;\tborder: 0 none;\tborder-left: 1px solid #dcdcdc;\tcursor: pointer;\tfloat: left;\theight: 22px;\tmargin: 0;\tposition: relative;\t}\t.ace_searchbtn:last-child,\t.ace_replacebtn:last-child {\tborder-top-right-radius: 3px;\tborder-bottom-right-radius: 3px;\t}\t.ace_searchbtn:disabled {\tbackground: none;\tcursor: default;\t}\t.ace_searchbtn {\tbackground-position: 50% 50%;\tbackground-repeat: no-repeat;\twidth: 27px;\t}\t.ace_searchbtn.prev {\tbackground-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADFJREFUeNpiSU1NZUAC/6E0I0yACYskCpsJiySKIiY0SUZk40FyTEgCjGgKwTRAgAEAQJUIPCE+qfkAAAAASUVORK5CYII=);    \t}\t.ace_searchbtn.next {\tbackground-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADRJREFUeNpiTE1NZQCC/0DMyIAKwGJMUAYDEo3M/s+EpvM/mkKwCQxYjIeLMaELoLMBAgwAU7UJObTKsvAAAAAASUVORK5CYII=);    \t}\t.ace_searchbtn_close {\tbackground: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;\tborder-radius: 50%;\tborder: 0 none;\tcolor: #656565;\tcursor: pointer;\tfloat: right;\tfont: 16px/16px Arial;\theight: 14px;\tmargin: 5px 1px 9px 5px;\tpadding: 0;\ttext-align: center;\twidth: 14px;\t}\t.ace_searchbtn_close:hover {\tbackground-color: #656565;\tbackground-position: 50% 100%;\tcolor: white;\t}\t.ace_replacebtn.prev {\twidth: 54px\t}\t.ace_replacebtn.next {\twidth: 27px\t}\t.ace_button {\tmargin-left: 2px;\tcursor: pointer;\t-webkit-user-select: none;\t-moz-user-select: none;\t-o-user-select: none;\t-ms-user-select: none;\tuser-select: none;\toverflow: hidden;\topacity: 0.7;\tborder: 1px solid rgba(100,100,100,0.23);\tpadding: 1px;\t-moz-box-sizing: border-box;\tbox-sizing:    border-box;\tcolor: black;\t}\t.ace_button:hover {\tbackground-color: #eee;\topacity:1;\t}\t.ace_button:active {\tbackground-color: #ddd;\t}\t.ace_button.checked {\tborder-color: #3399ff;\topacity:1;\t}\t.ace_search_options{\tmargin-bottom: 3px;\ttext-align: right;\t-webkit-user-select: none;\t-moz-user-select: none;\t-o-user-select: none;\t-ms-user-select: none;\tuser-select: none;\t}','ace_searchbox');var s='<div class="ace_search right">\t    <button type="button" action="hide" class="ace_searchbtn_close"></button>\t    <div class="ace_search_form">\t        <input class="ace_search_field" placeholder="Search for" spellcheck="false"></input>\t        <button type="button" action="findNext" class="ace_searchbtn next"></button>\t        <button type="button" action="findPrev" class="ace_searchbtn prev"></button>\t        <button type="button" action="findAll" class="ace_searchbtn" title="Alt-Enter">All</button>\t    </div>\t    <div class="ace_replace_form">\t        <input class="ace_search_field" placeholder="Replace with" spellcheck="false"></input>\t        <button type="button" action="replaceAndFindNext" class="ace_replacebtn">Replace</button>\t        <button type="button" action="replaceAll" class="ace_replacebtn">All</button>\t    </div>\t    <div class="ace_search_options">\t        <span action="toggleRegexpMode" class="ace_button" title="RegExp Search">.*</span>\t        <span action="toggleCaseSensitive" class="ace_button" title="CaseSensitive Search">Aa</span>\t        <span action="toggleWholeWords" class="ace_button" title="Whole Word Search">\\b</span>\t    </div>\t</div>'.replace(/>\s+/g,'>'),l=function(e){var t=o.createElement('div');t.innerHTML=s,this.element=t.firstChild,this.$init(),this.setEditor(e)};(function(){this.setEditor=function(e){e.searchBox=this,e.container.appendChild(this.element),this.editor=e},this.$initElements=function(e){this.searchBox=e.querySelector('.ace_search_form'),this.replaceBox=e.querySelector('.ace_replace_form'),this.searchOptions=e.querySelector('.ace_search_options'),this.regExpOption=e.querySelector('[action=toggleRegexpMode]'),this.caseSensitiveOption=e.querySelector('[action=toggleCaseSensitive]'),this.wholeWordOption=e.querySelector('[action=toggleWholeWords]'),this.searchInput=this.searchBox.querySelector('.ace_search_field'),this.replaceInput=this.replaceBox.querySelector('.ace_search_field')},this.$init=function(){var e=this.element;this.$initElements(e);var o=this;r.addListener(e,'mousedown',function(t){setTimeout(function(){o.activeInput.focus()},0),r.stopPropagation(t)}),r.addListener(e,'click',function(n){var e=n.target||n.srcElement,t=e.getAttribute('action');t&&o[t]?o[t]():o.$searchBarKb.commands[t]&&o.$searchBarKb.commands[t].exec(o),r.stopPropagation(n)}),r.addCommandKeyListener(e,function(t,e,n){var i=a.keyCodeToString(n),s=o.$searchBarKb.findKeyCommand(e,i);s&&s.exec&&(s.exec(o),r.stopEvent(t))}),this.$onChange=n.delayedCall(function(){o.find(!1,!1)}),r.addListener(this.searchInput,'input',function(){o.$onChange.schedule(20)}),r.addListener(this.searchInput,'focus',function(){o.activeInput=o.searchInput,o.searchInput.value&&o.highlight()}),r.addListener(this.replaceInput,'focus',function(){o.activeInput=o.replaceInput,o.searchInput.value&&o.highlight()})},this.$closeSearchBarKb=new i([{bindKey:'Esc',name:'closeSearchBar',exec:function(e){e.searchBox.hide()}}]),this.$searchBarKb=new i,this.$searchBarKb.bindKeys({"Ctrl-f|Command-f":function(e){var t=e.isReplace=!e.isReplace;e.replaceBox.style.display=t?'':'none',e.searchInput.focus()},"Ctrl-H|Command-Option-F":function(e){e.replaceBox.style.display='',e.replaceInput.focus()},"Ctrl-G|Command-G":function(e){e.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(e){e.findPrev()},esc:function(e){setTimeout(function(){e.hide()})},Return:function(e){e.activeInput==e.replaceInput&&e.replace(),e.findNext()},"Shift-Return":function(e){e.activeInput==e.replaceInput&&e.replace(),e.findPrev()},"Alt-Return":function(e){e.activeInput==e.replaceInput&&e.replaceAll(),e.findAll()},Tab:function(e){(e.activeInput==e.replaceInput?e.searchInput:e.replaceInput).focus()}}),this.$searchBarKb.addCommands([{name:'toggleRegexpMode',bindKey:{win:'Alt-R|Alt-/',mac:'Ctrl-Alt-R|Ctrl-Alt-/'},exec:function(e){e.regExpOption.checked=!e.regExpOption.checked,e.$syncOptions()}},{name:'toggleCaseSensitive',bindKey:{win:'Alt-C|Alt-I',mac:'Ctrl-Alt-R|Ctrl-Alt-I'},exec:function(e){e.caseSensitiveOption.checked=!e.caseSensitiveOption.checked,e.$syncOptions()}},{name:'toggleWholeWords',bindKey:{win:'Alt-B|Alt-W',mac:'Ctrl-Alt-B|Ctrl-Alt-W'},exec:function(e){e.wholeWordOption.checked=!e.wholeWordOption.checked,e.$syncOptions()}}]),this.$syncOptions=function(){o.setCssClass(this.regExpOption,'checked',this.regExpOption.checked),o.setCssClass(this.wholeWordOption,'checked',this.wholeWordOption.checked),o.setCssClass(this.caseSensitiveOption,'checked',this.caseSensitiveOption.checked),this.find(!1,!1)},this.highlight=function(e){this.editor.session.highlight(e||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},this.find=function(e,t,n){var r=this.editor.find(this.searchInput.value,{skipCurrent:e,backwards:t,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:n}),i=!r&&this.searchInput.value;o.setCssClass(this.searchBox,'ace_nomatch',i),this.editor._emit('findSearchBox',{match:!i}),this.highlight()},this.findNext=function(){this.find(!0,!1)},this.findPrev=function(){this.find(!0,!0)},this.findAll=function(){var e=this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked}),t=!e&&this.searchInput.value;o.setCssClass(this.searchBox,'ace_nomatch',t),this.editor._emit('findSearchBox',{match:!t}),this.highlight(),this.hide()},this.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},this.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},this.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},this.hide=function(){this.element.style.display='none',this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},this.show=function(e,t){this.element.style.display='',this.replaceBox.style.display=t?'':'none',this.isReplace=t,e&&(this.searchInput.value=e),this.find(!1,!1,!0),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb)},this.isFocused=function(){var e=document.activeElement;return e==this.searchInput||e==this.replaceInput}}).call(l.prototype),t.SearchBox=l,t.Search=function(e,t){var o=e.searchBox||new l(e);o.show(e.session.getTextRange(),t)}}),function(){ace.acequire(['ace/ext/searchbox'],function(){})}()},function(){ace.define('ace/theme/jsoneditor',['require','exports','module','ace/lib/dom'],function(e,t){t.isDark=!1,t.cssClass='ace-jsoneditor',t.cssText='.ace-jsoneditor .ace_gutter {\tbackground: #ebebeb;\tcolor: #333\t}\t\t.ace-jsoneditor.ace_editor {\tfont-family: droid sans mono, consolas, monospace, courier new, courier, sans-serif;\tline-height: 1.3;\t}\t.ace-jsoneditor .ace_print-margin {\twidth: 1px;\tbackground: #e8e8e8\t}\t.ace-jsoneditor .ace_scroller {\tbackground-color: #FFFFFF\t}\t.ace-jsoneditor .ace_text-layer {\tcolor: gray\t}\t.ace-jsoneditor .ace_variable {\tcolor: #1a1a1a\t}\t.ace-jsoneditor .ace_cursor {\tborder-left: 2px solid #000000\t}\t.ace-jsoneditor .ace_overwrite-cursors .ace_cursor {\tborder-left: 0px;\tborder-bottom: 1px solid #000000\t}\t.ace-jsoneditor .ace_marker-layer .ace_selection {\tbackground: lightgray\t}\t.ace-jsoneditor.ace_multiselect .ace_selection.ace_start {\tbox-shadow: 0 0 3px 0px #FFFFFF;\tborder-radius: 2px\t}\t.ace-jsoneditor .ace_marker-layer .ace_step {\tbackground: rgb(255, 255, 0)\t}\t.ace-jsoneditor .ace_marker-layer .ace_bracket {\tmargin: -1px 0 0 -1px;\tborder: 1px solid #BFBFBF\t}\t.ace-jsoneditor .ace_marker-layer .ace_active-line {\tbackground: #FFFBD1\t}\t.ace-jsoneditor .ace_gutter-active-line {\tbackground-color : #dcdcdc\t}\t.ace-jsoneditor .ace_marker-layer .ace_selected-word {\tborder: 1px solid lightgray\t}\t.ace-jsoneditor .ace_invisible {\tcolor: #BFBFBF\t}\t.ace-jsoneditor .ace_keyword,\t.ace-jsoneditor .ace_meta,\t.ace-jsoneditor .ace_support.ace_constant.ace_property-value {\tcolor: #AF956F\t}\t.ace-jsoneditor .ace_keyword.ace_operator {\tcolor: #484848\t}\t.ace-jsoneditor .ace_keyword.ace_other.ace_unit {\tcolor: #96DC5F\t}\t.ace-jsoneditor .ace_constant.ace_language {\tcolor: darkorange\t}\t.ace-jsoneditor .ace_constant.ace_numeric {\tcolor: red\t}\t.ace-jsoneditor .ace_constant.ace_character.ace_entity {\tcolor: #BF78CC\t}\t.ace-jsoneditor .ace_invalid {\tcolor: #FFFFFF;\tbackground-color: #FF002A;\t}\t.ace-jsoneditor .ace_fold {\tbackground-color: #AF956F;\tborder-color: #000000\t}\t.ace-jsoneditor .ace_storage,\t.ace-jsoneditor .ace_support.ace_class,\t.ace-jsoneditor .ace_support.ace_function,\t.ace-jsoneditor .ace_support.ace_other,\t.ace-jsoneditor .ace_support.ace_type {\tcolor: #C52727\t}\t.ace-jsoneditor .ace_string {\tcolor: green\t}\t.ace-jsoneditor .ace_comment {\tcolor: #BCC8BA\t}\t.ace-jsoneditor .ace_entity.ace_name.ace_tag,\t.ace-jsoneditor .ace_entity.ace_other.ace_attribute-name {\tcolor: #606060\t}\t.ace-jsoneditor .ace_markup.ace_underline {\ttext-decoration: underline\t}\t.ace-jsoneditor .ace_indent-guide {\tbackground: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y\t}';var o=e('../lib/dom');o.importCssString(t.cssText,t.cssClass)})}])});