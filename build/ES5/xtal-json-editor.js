import{XtallatX}from"./node_modules/xtal-latx/xtal-latx.js";import{define}from"./node_modules/xtal-latx/define.js";var cs_src,preloadLink=self.xtal_json_editor;if(preloadLink){cs_src=preloadLink.href}else{var cs=document.currentScript;if(cs){cs_src=cs.src}else{cs_src=import.meta.url}}var base=cs_src.split("/").slice(0,-1).join("/"),input="input",options="options",as="as",template=document.createElement("template"),css;fetch(base+"/jsoneditor.min.css",{credentials:"same-origin"}).then(function(resp){resp.text().then(function(content){var searchStr="img/jsoneditor-icons.svg";css=replaceAll(content,searchStr,base+"/"+searchStr);checkIfReady()})});var jsLoaded=!1,scriptTag=document.createElement("script");scriptTag.src=base+"/jsoneditor-minimalist.min.js";scriptTag.onload=function(){jsLoaded=!0;checkIfReady()};document.head.appendChild(scriptTag);function replaceAll(str,search,replace){return str.split(search).join(replace)}function checkIfReady(){if(jsLoaded&&css){template.innerHTML="\n            <style>\n            :host {\n                display: block;\n            }\n            ".concat(css,"\n            </style>\n            <div id=\"xcontainer\" style=\"height:100%;width:100%\"></div>            \n            ");init()}}var XtalJsonEditor=function(_XtallatX){babelHelpers.inherits(XtalJsonEditor,_XtallatX);function XtalJsonEditor(){var _this;babelHelpers.classCallCheck(this,XtalJsonEditor);_this=babelHelpers.possibleConstructorReturn(this,(XtalJsonEditor.__proto__||Object.getPrototypeOf(XtalJsonEditor)).call(this));_this._as="text";_this._connected=!1;_this.attachShadow({mode:"open"});_this.shadowRoot.appendChild(template.content.cloneNode(!0));return _this}babelHelpers.createClass(XtalJsonEditor,[{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldVal,newVal){switch(name){case input:case options:this[name]=JSON.parse(newVal);break;case as:this._as=newVal;break;}}},{key:"connectedCallback",value:function connectedCallback(){this._connected=!0;this._upgradeProperties([input,options,as]);this.onPropsChange()}},{key:"onPropsChange",value:function onPropsChange(){var _this2=this;if(!this._connected||!this._input||!this._options)return;if(!this._options.onChange){this.options.onChange=function(){var result=_this2._jsonEditor.get();if("text"===_this2.as)result=JSON.stringify(result);_this2.editedResult=result}}var container=this.shadowRoot.querySelector("#xcontainer");container.innerHTML="";this._jsonEditor=new JSONEditor(container,this.options);this._jsonEditor.set(this._input)}},{key:"input",get:function get(){return this._input},set:function set(val){this._input=val;this.onPropsChange()}},{key:"options",get:function get(){return this._options},set:function set(val){this._options=val;this.onPropsChange()}},{key:"editedResult",get:function get(){return this._editedResult},set:function set(val){this._editedResult=val;this.value=val;this.de("edited-result",{value:val})}},{key:"as",get:function get(){return this._as},set:function set(val){this.attr(as,val)}}],[{key:"is",get:function get(){return"xtal-json-editor"}},{key:"observedAttributes",get:function get(){return babelHelpers.get(XtalJsonEditor.__proto__||Object.getPrototypeOf(XtalJsonEditor),"observedAttributes",this).concat([input,options,as])}}]);return XtalJsonEditor}(XtallatX(HTMLElement));function init(){define(XtalJsonEditor)}